(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){"use strict";(function(e){var n=a(10),o=a(9),i=a(14),r=a(13),c=a(15),s=a(1),l=a.n(s),u=a(0),d=a(63),h=function(t){function a(){var e;Object(n.a)(this,a);return(e=Object(i.a)(this,Object(r.a)(a).call(this))).loadGoogleTag("UA-129704402-1"),d.a.initialize("UA-129704402-1"),e}return Object(c.a)(a,t),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.sendPageView(this.context.router.history.location),this.context.router.history.listen(this.sendPageView)}},{key:"sendPageView",value:function(e){d.a.set({page:e.pathname}),d.a.pageview(e.pathname)}},{key:"loadGoogleTag",value:function(t){e.dataLayer=e.dataLayer||[],e.gtag=function(){e.dataLayer.push(arguments)},e.gtag("js",new Date),e.gtag("config",t),setTimeout(function(){var e=document.createElement("script");e.src="https://www.googletagmanager.com/gtag/js?id=".concat(t),document.body.appendChild(e)},1)}},{key:"render",value:function(){return this.props.children}}]),a}(l.a.Component);h.contextTypes={router:u.PropTypes.object};var p=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;return"1"===e||"yes"===e?this.props.children:l.a.createElement(h,null,this.props.children)}}]),t}(l.a.Component);t.a=p}).call(this,a(85))},114:function(e,t,a){e.exports=a(234)},119:function(e,t,a){},145:function(e,t,a){},231:function(e,t,a){},234:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),i=a(11),r=a.n(i),c=(a(119),a(3)),s=a(10),l=a(9),u=a(14),d=a(13),h=a(15),p=a(237),m=a(239),g=a(238),y=a(236),f=a(105),v=a.n(f),b=a(25),k=a(18),P={locale:"en-en",AppMenu:{"By date":"By date",Live:"Live","Update!":"Update!","New version available!":"New version available!",Language:"Language","Change application language":"Change application language"},Rac1ByDate:{"Rac1 Radio Podcasts Player":"Rac1 Radio Podcasts Player"},Rac1Directe:{Live:"Live","Rac1 live":"Rac1 Live","Rac1 Radio Podcasts Player":"Rac1 Radio Podcasts Player"},ReloadButton:{Reload:"Reload"},Button:Object(c.a)({Key:"Key",Keys:"Keys",Prev:"Prev",Next:"Next",More:"More",Less:"Less",Play:"Play",Pause:"Pause",Mute:"Mute",Unmute:"Unmute","Remove last":"Remove last","Remove last podcast from playlist":"Remove last podcast from playlist","Play previous podcast":"Play previous podcast","Play next podcast":"Play next podcast","Toggle mute status":"Toggle mute status","Toggle Play/Pause":"Toggle Play/Pause","Show more controls":"Show more controls","Show less controls":"Show less controls"},[{symbol:"10s",orig:"10 seconds"},{symbol:"60s",orig:"1 minute"},{symbol:"10m",orig:"10 minutes"}].reduce(function(e,t){var a;return Object(c.a)({},e,(a={},Object(k.a)(a,"-".concat(t.symbol),["-".concat(t.symbol)]),Object(k.a)(a,"+".concat(t.symbol),["+".concat(t.symbol)]),Object(k.a)(a,"Go backwards ".concat(t.orig),"Go backwards ".concat(t.orig)),Object(k.a)(a,"Go forward ".concat(t.orig),"Go forward ".concat(t.orig)),a))},{}))},w={locale:"fr",AppMenu:Object(c.a)({"By date":"Per data",Live:"En directe","Update!":"Actualitza!","New version available!":"Nova versi\xf3 disponible!",Language:"Idioma","Change application language":"Canvia l'idioma de l'aplicaci\xf3"},["Catal\xe0","Castellano","English"].reduce(function(e,t){return Object(c.a)({},e,Object(k.a)({},"Change language to ".concat(t),"Canviar idioma a ".concat(t)))},{})),Rac1ByDate:{"Rac1 Radio Podcasts Player":"Reproductor de podcasts de Rac1"},Rac1Directe:{Live:"En directe","Rac1 live":"Rac1 en Directe","Rac1 Radio Podcasts Player":"Reproductor de podcasts de Rac1"},ReloadButton:{Reload:"Recarrega"},Button:Object(c.a)({Key:"Tecla",Keys:"Tecles",Prev:"Ant.",Next:"Seg.",More:"M\xe9s",Less:"Menys",Play:"Play",Pause:"Pausa",Mute:"Silenciar",Unmute:"Act. so","Remove last":"Elimina \xfalt","Remove last podcast from playlist":"Elimina l'\xfaltim podcast de la llista de reproducci\xf3","Play previous podcast":"Reprodueix el podcast anterior","Play next podcast":"Reprodueix el podcast seg\xfcent","Toggle mute status":"Canvia l'estat del silenci","Toggle Play/Pause":"Canvia Reprodueix/Pausa","Show more controls":"Mostra m\xe9s controls","Show less controls":"Mostra menys controls"},[{symbol:"10s",orig:"10 seconds",trans:"10 segons"},{symbol:"60s",orig:"1 minute",trans:"1 minut"},{symbol:"10m",orig:"10 minutes",trans:"10 minuts"}].reduce(function(e,t){var a;return Object(c.a)({},e,(a={},Object(k.a)(a,"-".concat(t.symbol),["-".concat(t.symbol)]),Object(k.a)(a,"+".concat(t.symbol),["+".concat(t.symbol)]),Object(k.a)(a,"Go backwards ".concat(t.orig),"Retrocedir ".concat(t.trans)),Object(k.a)(a,"Go forward ".concat(t.orig),"Avan\xe7ar ".concat(t.trans)),a))},{}))},E={locale:"es-es",AppMenu:Object(c.a)({"By date":"Por fecha",Live:"En directo","Update!":"\xa1Actualiza!","New version available!":"\xa1Nueva versi\xf3n disponible!",Language:"Idioma","Change application language":"Cambiar el idioma de la aplicaci\xf3n"},["Catal\xe0","Castellano","English"].reduce(function(e,t){return Object(c.a)({},e,Object(k.a)({},"Change language to ".concat(t),"Cambiar idioma a ".concat(t)))},{})),Rac1ByDate:{"Rac1 Radio Podcasts Player":"Reproductor de podcasts de Rac1"},Rac1Directe:{Live:"En directo","Rac1 live":"Rac1 en Directo","Rac1 Radio Podcasts Player":"Reproductor de podcasts de Rac1"},ReloadButton:{Reload:"Recarga"},Button:Object(c.a)({Key:"Tecla",Keys:"Teclas",Prev:"Ant.",Next:"Sig.",More:"M\xe1s",Less:"Menos",Play:"Play",Pause:"Pausa",Mute:"Silenciar",Unmute:"Act. sonido","Remove last":"Eliminar \xfalt","Remove last podcast from playlist":"Eliminar el \xfaltimo podcast de la lista de reproducci\xf3n","Play previous podcast":"Reproducir el podcast anterior","Play next podcast":"Reproducir el podcast seguinte","Toggle mute status":"Canviar el estado del silencio","Toggle Play/Pause":"Canviar Reproducir/Pausa","Show more controls":"Mostrar m\xe1s controles","Show less controls":"Mostrar menos controles"},[{symbol:"10s",orig:"10 seconds",trans:"10 segundos"},{symbol:"60s",orig:"1 minute",trans:"1 minuto"},{symbol:"10m",orig:"10 minutes",trans:"10 minutos"}].reduce(function(e,t){var a;return Object(c.a)({},e,(a={},Object(k.a)(a,"-".concat(t.symbol),["-".concat(t.symbol)]),Object(k.a)(a,"+".concat(t.symbol),["+".concat(t.symbol)]),Object(k.a)(a,"Go backwards ".concat(t.orig),"Retroceder ".concat(t.trans)),Object(k.a)(a,"Go forward ".concat(t.orig),"Avanzar ".concat(t.trans)),a))},{}))},j={en:P,"en-en":P,"en-us":P,"en-au":P,ca:w,"ca-es":w,es:E,"es-es":E},O=a(235),C=a(8),D=a(5),S=a(41),x=a.n(S),R=a(84),L=(a(145),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={isOpen:!1,isLanguageOpen:!1},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"renderLinks",value:function(){var e=this,t=this.props,a=t.newServiceWorkerDetected,n=t.children,i=t.t,r=this.state.isLanguageOpen;return o.a.createElement("div",{style:{padding:"3em 1em 1em",background:"url(".concat("/Rac1.js","/logo-rac1.png)"),backgroundSize:50,backgroundRepeat:"no-repeat",backgroundPosition:"center .5em"}},o.a.createElement(O.a,{className:"bm-item",onClick:this.handleClick.bind(this),to:"/"},o.a.createElement(C.a,{icon:D.c,style:{marginRight:".5em"}}),o.a.createElement("span",null,i("By date"))),o.a.createElement(O.a,{className:"bm-item",onClick:this.handleClick.bind(this),to:"/live"},o.a.createElement(C.a,{icon:D.b,style:{marginRight:".5em"}}),o.a.createElement("span",null,i("Live"))),a?o.a.createElement("a",{href:"/",className:"bm-item",style:{color:"green"},title:i("New version available!"),onClick:this.handleClickUpdate.bind(this)},o.a.createElement(C.a,{icon:D.a,style:{marginRight:".5em"}}),o.a.createElement("span",null,i("Update!"))):null,o.a.createElement("a",{href:"/",className:"bm-item",title:i("Change application language"),onClick:this.handleLanguageSectionClick.bind(this)},o.a.createElement(C.a,{icon:D.j,style:{marginRight:".5em"}}),o.a.createElement("span",null,i("Language")),o.a.createElement(C.a,{icon:r?D.d:D.e,style:{marginLeft:".5em"}})),r?o.a.createElement("ul",{style:{listStyleType:"none",marginTop:0}},[{code:"ca",name:"Catal\xe0"},{code:"es",name:"Castellano"},{code:"en",name:"English"}].map(function(t){return o.a.createElement("li",{key:t.code},o.a.createElement("a",{href:"/",className:"bm-item",title:i("Change language to ".concat(t.name)),onClick:e.handleClickLanguage.bind(e,t.code)},o.a.createElement("span",null,t.name)))})):null,n)}},{key:"render",value:function(){var e=this,t=this.props.newServiceWorkerDetected,a=this.state.isOpen,n=t?" news":"";return o.a.createElement(x.a,{minWidth:1024},function(t){var i=t?R.scaleRotate:R.slide;return o.a.createElement("div",{className:"menu-".concat(t?"big":"small").concat(n)},o.a.createElement(i,{pageWrapId:"page-wrap",outerContainerId:"router-container",isOpen:a,onStateChange:function(t){return e.handleMenuStateChange(t.isOpen)},disableCloseOnEsc:!0},e.renderLinks()))})}},{key:"handleMenuStateChange",value:function(e){this.setState({isOpen:e})}},{key:"handleClick",value:function(e){this.handleMenuStateChange(!1)}},{key:"handleLanguageSectionClick",value:function(e){var t=this.state.isLanguageOpen;e.preventDefault(),this.setState(Object(c.a)({},this.state,{isLanguageOpen:!t}))}},{key:"handleClickLanguage",value:function(e,t){t.preventDefault(),this.handleMenuStateChange(!1),this.props.onLanguageChange(e)}},{key:"handleClickUpdate",value:function(e){e.preventDefault(),this.handleMenuStateChange(!1),this.props.onLoadNewServiceWorkerAccept()}}]),t}(o.a.Component));L.defaultProps={onLoadNewServiceWorkerAccept:function(){},newServiceWorkerDetected:!1,onLanguageChange:function(e){}};var U=Object(b.translate)("AppMenu")(L),M=a(106),A=a(58),T=a.n(A),F=a(61),N=a(42),W=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"keysString",value:function(){if(0===this.props.keys.length)return"";var e=this.props.t,t=Object(N.a)(new Set(this.props.keys.map(function(e){return" "===e?"Space":e}).map(function(e){return 1===e.length?e.toUpperCase():e})));return" | ".concat(e("Key".concat(t.length>1?"s":"")),": ").concat(t.join(", "))}},{key:"render",value:function(){var e=this.props,t=e.text,a=e.help,n=e.icon,i=e.action,r=(e.keys,e.style),s=e.className,l=e.t,u=Object(F.a)(e,["text","help","icon","action","keys","style","className","t"]),d=Object(c.a)({borderRadius:"1em",padding:".7em",margin:"1em"},r),h=l(a)+this.keysString();return o.a.createElement("button",Object.assign({onClick:i,"aria-label":h,title:h,className:"rac1-controls-button"+(s?" ".concat(s):""),style:d},u),o.a.createElement("div",{style:{fontSize:"calc(1em + 2.5vmin)",fontWeight:"bold",minWidth:"1.5em"}},n instanceof Function?n():n),o.a.createElement("span",{style:{fontSize:"calc(8px + 1vmin)",color:"#333"}},l(t instanceof Function?t():t)))}}]),t}(o.a.PureComponent);W.defaultProps={action:function(){},keys:[]};var B=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.buttons,n=t.keyHandlerFocus,i=t.children;return o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},a.map(function(t,a){return o.a.createElement(H,{key:a,onMouseUp:function(e){return n(e,!0)},action:t.action.bind(e),help:t.help,text:t.text,icon:t.icon,keys:t.keys})}),i)}}]),t}(o.a.PureComponent);B.defaultProps={keyHandlerFocus:function(e,t){}};var H=Object(b.translate)("Button")(W),_=a(112),I=(a(200),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.volume,n=t.muted,i="Volume handler | Keys: Shift + Arrow Up, Shift + Arrow Down",r=n?D.o:0===a?D.p:a<.5?D.n:D.q;return o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end"}},o.a.createElement("div",{style:{width:"100%",minWidth:40,height:100,display:"flex",alignItems:"center",flexDirection:"column",paddingTop:".3em"}},o.a.createElement(_.a,{onAfterChange:function(){return e.props.keyHandlerFocus()},onChange:function(t){return e.props.onSetVolume(t/100)},value:100*a,vertical:!0,"aria-label":i,title:i})),o.a.createElement("div",null,o.a.createElement(H,{onMouseUp:function(t){return e.props.keyHandlerFocus(t,!0)},action:function(){return e.props.onSetMuted(!n)},help:"Toggle mute status",text:n?"Unmute":"Mute",icon:o.a.createElement(C.a,{icon:r}),keys:["M"]})))}}]),t}(o.a.Component));I.defaultProps={keyHandlerFocus:function(){},onSetVolume:function(e){},onSetMuted:function(e){},volume:1,muted:!1};var K=I,V=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this))).controls=[{icon:o.a.createElement(C.a,{icon:D.h,flip:"horizontal"}),text:"Prev",help:"Play previous podcast",action:function(){return a.props.onPlayPrev()},group:"basic"},{icon:o.a.createElement("span",{style:{whiteSpace:"nowrap"}},o.a.createElement(C.a,{icon:D.i,flip:"horizontal"}),o.a.createElement(C.a,{icon:D.i,flip:"horizontal"})),text:"-10m",help:"Go backwards 10 minutes",action:function(){return a.player().currentTime-=600},keys:["PageUp"],group:"advanced prev"},{icon:o.a.createElement("span",{style:{whiteSpace:"nowrap"}},o.a.createElement(C.a,{icon:D.i,flip:"horizontal",style:{position:"relative",left:".25em"}}),o.a.createElement(C.a,{icon:D.i,flip:"horizontal",style:{position:"relative",left:"-.25em"}})),text:"-60s",help:"Go backwards 1 minute",action:function(){return a.player().currentTime-=60},keys:["ArrowUp"],group:"advanced prev"},{icon:o.a.createElement(C.a,{icon:D.i,flip:"horizontal"}),text:"-10s",help:"Go backwards 10 seconds",action:function(){return a.player().currentTime-=10},keys:["ArrowLeft"],group:"advanced prev"},{icon:function(){return a.props.isPlaying?o.a.createElement(C.a,{icon:D.k}):o.a.createElement(C.a,{icon:D.l})},text:function(){return a.props.isPlaying?"Pause":"Play"},help:"Toggle Play/Pause",action:function(){return a.player().paused?a.player().play():a.player().pause()},keys:[" ","p","P"],group:"basic"},{icon:o.a.createElement(C.a,{icon:D.i}),text:"+10s",help:"Go forward 10 seconds",action:function(){return a.player().currentTime+=10},keys:["ArrowRight"],group:"advanced next"},{icon:o.a.createElement("span",{style:{whiteSpace:"nowrap"}},o.a.createElement(C.a,{icon:D.i,style:{position:"relative",left:".25em"}}),o.a.createElement(C.a,{icon:D.i,style:{position:"relative",left:"-.25em"}})),text:"+60s",help:"Go forward 1 minute",action:function(){return a.player().currentTime+=60},keys:["ArrowDown"],group:"advanced next"},{icon:o.a.createElement("span",{style:{whiteSpace:"nowrap"}},o.a.createElement(C.a,{icon:D.i}),o.a.createElement(C.a,{icon:D.i})),text:"+10m",help:"Go forward 10 minutes",action:function(){return a.player().currentTime+=600},keys:["PageDown"],group:"advanced next"},{icon:o.a.createElement(C.a,{icon:D.h}),text:"Next",help:"Play next podcast",action:function(){return a.props.onPlayNext()},keys:["Enter"],group:"basic"},{help:"Decrement volume 5%",action:function(){return a.incrementVolume(-.05)},keys:["/",{key:"ArrowDown",shiftKey:!0}]},{help:"Increment volume 5%",action:function(){return a.incrementVolume(.05)},keys:["*",{key:"ArrowUp",shiftKey:!0}]},{help:"Toggle mute status",action:function(){return a.setMuted(!a.player().muted)},keys:["m","M"]}],a.keyHandlerFocus=function(){},a._keyHandlerFocus=function(e,t){var n=!0;e&&e.relatedTarget&&a.props.allowFocus(e.relatedTarget)&&(n=!1),(n||t)&&(a.timer=setTimeout(function(){return a._keyHandler.focus()},100))},a.player=function(){return a.props.getPlayer()},a.state={noKeys:!0},e.extraControls.length&&(a.controls=a.controls.concat(e.extraControls)),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=!0;/Mobi|Android/i.test(navigator.userAgent)||(e=!1,this.keyHandlerFocus=this._keyHandlerFocus,this.keyHandlerFocus()),this.setState(Object(c.a)({},this.state,{noKeys:e}))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"filterButtonsGroup",value:function(e,t){var a=this.props.hideButtons,n=this.state.noKeys;return e.filter(function(e){return"icon"in e&&"text"in e}).filter(function(e){return!a.includes(e.text)}).filter(function(e){return e.group.split(" ").includes(t)}).map(function(e){if(n){e.keys;return Object(F.a)(e,["keys"])}return e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.showAdvanced,n=t.volumeAsAdvanced,i=t.volume,r=t.muted,c=this.state.noKeys,s=["basic","advanced"].reduce(function(t,a){return t[a]=e.filterButtonsGroup(e.controls,a),t},{});return o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end"}},s.basic.length?o.a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},o.a.createElement(B,{buttons:s.basic,keyHandlerFocus:this.keyHandlerFocus.bind(this)},s.advanced.length?o.a.createElement(H,{onMouseUp:function(t){return e.keyHandlerFocus(t,!0)},action:this.handleShowAdvancedChange.bind(this,!a),help:"Show ".concat(a?"less":"more"," controls"),text:a?"Less":"More",icon:o.a.createElement(C.a,{icon:a?D.g:D.f})}):null),n?null:o.a.createElement(K,{volume:i,muted:r,onSetVolume:this.setVolume.bind(this),onSetMuted:this.setMuted.bind(this),keyHandlerFocus:this.keyHandlerFocus.bind(this)})):null,o.a.createElement("div",{style:{display:"flex"}},a&&s.advanced.length?o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},o.a.createElement(B,{buttons:this.filterButtonsGroup(s.advanced,"prev"),keyHandlerFocus:this.keyHandlerFocus.bind(this)}),o.a.createElement(B,{buttons:this.filterButtonsGroup(s.advanced,"next"),keyHandlerFocus:this.keyHandlerFocus.bind(this)})):null,a&&n?o.a.createElement(K,{volume:i,muted:r,onSetVolume:this.setVolume.bind(this),onSetMuted:this.setMuted.bind(this),keyHandlerFocus:this.keyHandlerFocus.bind(this)}):null),c?null:o.a.createElement("input",{name:"player-key-handler",style:{width:"1px",height:"1px",border:0,margin:0,padding:0,bottom:0,right:0,position:"fixed",backgroundColor:"transparent",color:"transparent",cursor:"default"},ref:function(t){e._keyHandler=t},onKeyUp:this.handleKey.bind(this),onBlur:this.keyHandlerFocus.bind(this),"aria-label":"Key input handler"}))}},{key:"setMuted",value:function(e){this.player().muted=e,this.props.onSetMuted(e)}},{key:"setVolume",value:function(e){this.player().volume=e,this.props.onSetVolume(e)}},{key:"incrementVolume",value:function(e){var t=this.props.volume,a=t;e>0&&t<1&&(a=t<=1-e?t+e:1),e<0&&t>0&&(a=t>=-e?t+e:0),a!==t&&this.setVolume(a)}},{key:"handleKey",value:function(e){var t=!1;this.controls.forEach(function(a){(a.keys||[]).forEach(function(n){var o="string"===typeof n?{key:n}:n;e.key===o.key&&["shiftKey","altKey","ctrlKey","metaKey"].every(function(t){return!!e[t]===!!o[t]})&&(console.log(a.help),t=!0,a.action())})}),t&&(e.stopPropagation(),e.preventDefault())}},{key:"handleShowAdvancedChange",value:function(e,t){t.preventDefault(),this.props.onShowAdvancedChange(e)}}]),t}(o.a.Component);V.defaultProps={onSetVolume:function(e){},onSetMuted:function(e){},onPlayPrev:function(e){},onPlayNext:function(e){},allowFocus:function(e){},onShowAdvancedChange:function(e){},extraControls:[],hideButtons:[],volume:1,muted:!1,isPlaying:!1,showAdvanced:!1,volumeAsAdvanced:!1};var G=V,z=function(e){function t(e,a){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this))).state={volume:1},n.history=e.history,n.state={volume:1,muted:!1,isPlaying:!1},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"player",value:function(){return this._player.audioEl}}]),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.t;this.initialTitle=document.title,document.title="".concat(e(this.initialTitle)," - ").concat(e("Live"))}},{key:"componentWillUnmount",value:function(){document.title=this.initialTitle}},{key:"render",value:function(){var e=this,t=this.state,a=t.volume,n=t.muted,i=t.isPlaying,r=(0,this.props.t)("Rac1 live");return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,r),o.a.createElement(G,{getPlayer:this.player.bind(this),volume:a,muted:n,allowFocus:function(e){return e.className.match(/rc-slider-handle/)},isPlaying:i,onSetVolume:function(t){return e.setState(Object(c.a)({},e.state,{volume:t}))},onSetMuted:function(t){return e.setState(Object(c.a)({},e.state,{muted:t}))},hideButtons:["Prev","Next","-10m","-60s","-10s","+10m","+60s","+10s"]}),o.a.createElement(T.a,{ref:function(t){e._player=t},style:{width:"100%"},src:"http://rac1.radiocat.net/;*.nsv",autoPlay:!0,title:r,controls:!0,controlsList:"nodownload",preload:"auto",volume:a,muted:n,onPlay:this.handlePlayStatusChange.bind(this,!0),onPause:this.handlePlayStatusChange.bind(this,!1),onVolumeChanged:function(t){return e.setState(Object(c.a)({},e.state,{volume:t.currentTarget.volume,muted:t.currentTarget.muted}))}}))}},{key:"handlePlayStatusChange",value:function(e){this.setState(Object(c.a)({},this.state,{isPlaying:e}))}}]),t}(n.Component),Y=Object(b.translate)("Rac1Directe")(z),$=a(48),q=a(110),J=a.n(q),Q=Object(b.translate)("ReloadButton")(function(e){var t=e.t,a=e.restProps,n=t("Reload");return o.a.createElement("button",Object.assign({},a,{"aria-label":n,style:{borderRadius:".5em",padding:".25em",margin:"0 0 0 1em"}}),o.a.createElement("div",{style:{fontSize:"calc(.5em + 2vmin)",fontWeight:"bold",marginBottom:"-.25em"}},o.a.createElement(C.a,{icon:D.m})),o.a.createElement("span",{style:{fontSize:"calc(5px + 1vmin)",color:"#333"}},n))}),X=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.completedDownload,a=e.date,n=e.children,i=e.minDate,r=e.maxDate;return o.a.createElement("div",{style:{color:"#333",backgroundColor:"white",padding:"2em",borderRadius:"1em",margin:"1em",textAlign:"left",position:"relative",fontSize:"large"}},o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement(J.a,{onChange:this.handleDateChange.bind(this),onBlur:this.handleDateBlur.bind(this),minDate:i,maxDate:r,required:!0,value:a,clearIcon:null,calendarIcon:o.a.createElement(C.a,{icon:D.c})}),o.a.createElement(Q,{onClick:this.props.onClickReload.bind(this),disabled:!t})),o.a.createElement("div",{style:{textAlign:"center"}},n))}},{key:"handleDateChange",value:function(e){e.setHours(0),e.setMinutes(0),this.props.onDateChange(e)}},{key:"handleDateBlur",value:function(e){var t=!0;e&&e.relatedTarget&&e.relatedTarget.className.match(/(calendar|date-?picker)/)&&(t=!1),t&&this.props.onDateBlur(e)}}]),t}(o.a.PureComponent);X.defaultProps={onClickReload:function(e){},onDateBlur:function(e){},onDateChange:function(e){},completedDownload:!0,date:new Date,maxDate:new Date};var Z=X,ee=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"renderChildren",value:function(){var e=this.props,t=e.children,a=e.current;return void 0===t||0===t.length?null:t.map(function(e,t){return o.a.createElement("li",{key:e.key,style:{position:"relative",marginLeft:"2.5em",textIndent:"-1.5em",padding:"1pt 0"}},t===a?o.a.createElement(C.a,{icon:D.l,style:{position:"absolute",left:"-2.75em",padding:"1pt 0"}}):null,e)})}},{key:"render",value:function(){var e=this,t=this.props.children,a={listStyleType:"none",marginLeft:0,paddingLeft:0,textAlign:"left"};return void 0===t||0===t.length?null:o.a.createElement(x.a,{minWidth:1024},function(n){return o.a.createElement("ul",{style:Object(c.a)({},a,{columnCount:n&&Math.floor(t.length/10)||1})},e.renderChildren())})}}]),t}(o.a.PureComponent);ee.defaultProps={};var te=ee,ae=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).handleClick=function(e){return a.props.onClick(e)},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.path,n=t.uuid,i=t.hour,r=t.minute,c=t.title;return o.a.createElement("span",null,a?o.a.createElement("a",{href:a,onClick:this.handleClick.bind(this),style:{textDecoration:"none"}},i,"h",r?((e=r)<10?"0":"")+e:"",": ",c):o.a.createElement("span",null,n))}}]),t}(o.a.PureComponent);ae.defaultProps={onClick:function(e){}};var ne=ae,oe=function(){function e(t){Object(s.a)(this,e),this._podcastsData={},this._pages_uuids=[],this._previous_uuids=[],this.controller=new AbortController,this.dataAttrsFind=/ class="(audioteca-item|pagination-link)" /,this.dataAttrsClean=/.* (data-[^=]*)="([^"]*)".*/;this.onListUpdate=t.onListUpdate||function(){},this.setDate(t.date)}return Object(l.a)(e,[{key:"abort",value:function(){this.controller.abort()}},{key:"handleFetchErrors",value:function(e){if(!e.ok)throw Error(e.statusText);return e}},{key:"catchFetchErrors",value:function(e){"AbortError"===e.name?console.log(e.message):console.error(e)}},{key:"setDate",value:function(e){this.date!==e&&(this._previous_uuids=[]),this.date=e,this.updateList()}},{key:"updateList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===e&&(this._pages_uuids=[],this.pages=[0],this.handleListUpdate()),this.getPodcastsUUIDs(e).then(this.getPodcasts.bind(this,e)).then(this.handleListUpdate.bind(this,e)).catch(this.catchFetchErrors)}},{key:"getPodcasts",value:function(e,t){var a=this;return t.map(function(t){return"..."===t.uuid||t.uuid in a._podcastsData||a.getPodcastData(t.uuid).then(a.handlePodcastUpdate.bind(a,e)).catch(a.catchFetchErrors),t})}},{key:"handleListUpdate",value:function(){var e=this,t=Object(N.a)(this._previous_uuids.filter(function(e){return"..."!==e.uuid})),a=!0,n=function(e){return"".concat(e.getFullYear(),"/").concat(e.getMonth()+1,"/").concat(e.getDate())},o=function(t){return!("date"in t)||(a=t.date,o=e.date,n(a)===n(o));var a,o};this.pages.forEach(function(n){var i=e._pages_uuids[n];void 0===i?(t.push({uuid:"..."}),a=!1):i.filter(function(e){return 0===t.filter(function(t){return t.uuid===e.uuid}).length}).filter(o).forEach(function(e){return t.push(e)})}),t=t.map(function(t){return e._podcastsData[t.uuid]||t}).filter(o),a&&(this._previous_uuids=t);var i=a&&t.every(function(e){return"path"in e});return this.onListUpdate(t,i),t}},{key:"handlePodcastUpdate",value:function(e,t){var a=this;t.page=e,this._pages_uuids[e].forEach(function(n,o){n.uuid===t.uuid&&(a._pages_uuids[e][o]=t)}),this.handleListUpdate(t)}},{key:"getPodcastsUUIDs",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.getPage(t).then(function(a){var n=e.parsePage(a),o=n.uuidsPage,i=n.pages;return 0===t&&(e.pages=i.length>0?i.reverse():[0],e.pages.forEach(function(t){return 0!==t&&e.updateList(t)})),e._pages_uuids[t]=o.reverse().map(function(e){return{uuid:e,page:t}}),e._pages_uuids[t]})}},{key:"getPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=function(e){return(e<10?"0":"")+e},a=t(this.date.getDate())+"/"+t(1+this.date.getMonth())+"/"+this.date.getFullYear(),n=new Date(this.date.getTime());n.setDate(n.getDate()+1);var o="";return 2019===n.getFullYear()&&0===n.getMonth()&&1===n.getDate()||(o=t(n.getDate())+"/"+t(1+n.getMonth())+"/"+n.getFullYear()),fetch("https://cors-anywhere.herokuapp.com/https://api.audioteca.rac1.cat/a-la-carta/cerca?text=&programId=&sectionId=HOUR&"+"from=".concat(a,"&to=").concat(o,"&pageNumber=").concat(e),{credentials:"same-origin",signal:this.controller.signal}).then(this.handleFetchErrors).then(function(e){return e.text()})}},{key:"parsePage",value:function(e){var t=this,a=["data-audio-id","data-audioteca-search-page"],n=e.split("\n").filter(function(e){return t.dataAttrsFind.test(e)}).map(function(e){return e.replace(t.dataAttrsClean,"$1=$2")}).map(function(e){return e.split("=")}).filter(function(e){return a.includes(e[0])});return{uuidsPage:n.filter(function(e){return"data-audio-id"===e[0]}).map(function(e){return e[1]}),pages:n.filter(function(e){return"data-audioteca-search-page"===e[0]}).map(function(e){return Number(e[1])})}}},{key:"getPodcastData",value:function(e){var t=this;return e in this._podcastsData?new Promise(function(a){return a(t._podcastsData[e])}):fetch("https://api.audioteca.rac1.cat/piece/audio?id=".concat(e),{signal:this.controller.signal}).then(this.handleFetchErrors).then(function(e){return e.json()}).then(function(a){return a.dateTime.startsWith("".concat(t.date.getFullYear()+1,"-").concat(t.date.getMonth()+1))&&(a.dateTime=a.dateTime.replace("".concat(t.date.getFullYear()+1),"".concat(t.date.getFullYear())),console.log("Podcast date in future. Fixing to: "+a.dateTime)),a.uuid=e,a.date=new Date(a.dateTime),a.hour=Number(a.audio.time.split(":")[0]),a.minute=Number(a.audio.time.split(":")[1]),a.title=a.appTabletTitle.replace(/ \d\d\/.*/,""),a.titleFull=a.appTabletTitle,a.path=a.path.replace(/\/get\//,"/file/").replace(/\/(\d)\//,"/$1/-/"),t._podcastsData[e]=a,a})}}]),e}(),ie=function(e){function t(e,a){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this))).history=e.history,n.initialTitle=document.title,n.state={podcasts:[{uuid:"..."}],currentUUID:"",date:n.getDateFromParams(e),maxDate:new Date,volume:1,muted:!1,isPlaying:!1,completed:!1,waitingUpdate:!1,showAdvancedControls:!1},n.extraControls=[{help:"Reload playlist",action:n.handleClickReload.bind(Object($.a)(Object($.a)(n))),keys:["r","R"]}],n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"getDateFromParams",value:function(e){var t=e.match.params;return new Date(t.year,t.month-1,t.day,t.hour||0,t.minute||0)}}]),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.unlisten=this.history.listen(this.handleHistoryChange.bind(this)),this.rac1=new oe({date:this.state.date,onListUpdate:this.handleListUpdate.bind(this)})}},{key:"componentWillUnmount",value:function(){this.unlisten(),this.rac1.abort(),document.title=this.initialTitle}},{key:"render",value:function(){var e=this,t=this.state,a=t.podcasts,n=t.volume,i=t.muted,r=t.completed,s=t.date,l=t.maxDate,u=t.isPlaying,d=t.showAdvancedControls,h=s instanceof Date?"".concat(s.getDate(),"/").concat(1+s.getMonth(),"/").concat(s.getFullYear()):"...",p=this.findCurrentPodcast(),m=p>0,g=void 0!==a&&a.length>p&&"path"in a[p]?a[p].path:"",y=void 0!==a&&a.length>0&&"audio"in a[p]?"".concat(a[p].titleFull):h,f=o.a.createElement(G,{getPlayer:this.player.bind(this),volume:n,muted:i,allowFocus:function(e){return e.className.match(/date-?picker|rc-slider-handle/)},onPlayNext:this.playNext.bind(this),onPlayPrev:this.playPrev.bind(this),onSetVolume:function(t){return e.setState(Object(c.a)({},e.state,{volume:t}))},onSetMuted:function(t){return e.setState(Object(c.a)({},e.state,{muted:t}))},showAdvanced:d,volumeAsAdvanced:!0,onShowAdvancedChange:function(t){return e.setState(Object(c.a)({},e.state,{showAdvancedControls:t}))},isPlaying:u,ref:function(t){t&&(e.keyHandlerFocus=t.keyHandlerFocus)},extraControls:this.extraControls}),v=o.a.createElement(T.a,{ref:function(t){e._player=t},style:{width:"100%"},src:g,autoPlay:m,title:y,controls:!0,controlsList:"nodownload",preload:m?"auto":"metadata",onEnded:this.playNext.bind(this),volume:n,muted:i,onPlay:this.handlePlayStatusChange.bind(this,!0),onPause:this.handlePlayStatusChange.bind(this,!1),onVolumeChanged:function(t){return e.setState(Object(c.a)({},e.state,{volume:t.currentTarget.volume,muted:t.currentTarget.muted}))}}),b=o.a.createElement(Z,{date:s,minDate:new Date(2015,5,1),maxDate:l,completedDownload:r,onClickReload:this.handleClickReload.bind(this),onDateBlur:function(){return e.keyHandlerFocus()},onDateChange:this.handleDateChange.bind(this)},o.a.createElement(te,{current:p},a.map(function(t,a){return o.a.createElement(ne,Object.assign({key:"..."!==t.uuid?t.uuid:"..._".concat(a)},t,{onClick:e.handlePodcastClick.bind(e,a)}))})));return o.a.createElement(x.a,{minWidth:1024},function(e){return e?o.a.createElement("div",{style:{display:"flex",alignItems:"stretch"}},o.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-evenly"}},o.a.createElement("h3",null,y),f,v),b):o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,y),f,v,b)})}},{key:"handleHistoryChange",value:function(e,t){var a=this.getDateFromParams(this.props),n=this.state.date;"POP"===t&&(n.getFullYear()!==a.getFullYear()||n.getMonth()!==a.getMonth()||n.getDate()!==a.getDate()?this.handleDateChange(a):n.getHours()===a.getHours()&&n.getMinutes()===a.getMinutes()||(this.setState(Object(c.a)({},this.state,{currentUUID:"",dateNew:a})),this.selectPodcastByDate(a,!1)))}},{key:"historyPush",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="/".concat(e.getFullYear(),"/").concat(1+e.getMonth(),"/").concat(e.getDate(),"/").concat(e.getHours(),"/").concat(e.getMinutes());this.history.location.pathname!==a&&(t?this.history.replace(a):this.history.push(a))}},{key:"handlePlayStatusChange",value:function(e){this.setState(Object(c.a)({},this.state,{isPlaying:e}))}},{key:"handleListUpdate",value:function(e,t){var a=this.state,n=a.waitingUpdate,o=a.currentUUID,i=a.date,r=(!n||!t)&&n;this.setState(Object(c.a)({},this.state,{podcasts:e,completed:t,waitingUpdate:r,maxDate:new Date})),t&&""===o&&this.selectPodcastByDate(i),!0===n&&!1===r&&this.playNext(!1)}},{key:"handleDateChange",value:function(e){var t=this;e!==this.state.date&&(this.setState(Object(c.a)({},this.state,{currentUUID:"",date:e})),null!==e&&(this.historyPush(e),setTimeout(function(){return t.rac1.setDate(e)},50)))}},{key:"handlePodcastsLastRemove",value:function(){this.setState(Object(c.a)({},this.state,{podcasts:Object(N.a)(this.state.podcasts).slice(0,-1)}))}},{key:"handleClickReload",value:function(){if(this.state.completed)return this.setState(Object(c.a)({},this.state,{completed:!1})),this.rac1.updateList()}},{key:"selectPodcastByDate",value:function(e){var t=this.state.podcasts.filter(function(t){return t.hour>=e.getHours()&&(t.hour>e.getHours()||t.minute>=e.getMinutes())});t.length>0&&this.playPodcast(this.findPodcastByUUID(t[0].uuid))}},{key:"findPodcastByUUID",value:function(e){var t=0;return this.state.podcasts.forEach(function(a,n){a.uuid===e&&(t=n)}),t}},{key:"findCurrentPodcast",value:function(){return this.findPodcastByUUID(this.state.currentUUID)}},{key:"playPodcast",value:function(e){var t,a=this.state,n=a.date,o=a.currentUUID,i=this.props.t,r=this.state.podcasts[e];r.hour===n.getHours()&&r.minute===n.getMinutes()||(n.setHours(Number(r.hour)),n.setMinutes(Number(r.minute))),t=""===o,document.title="".concat(i(this.initialTitle),": ").concat(r.titleFull),this.setState(Object(c.a)({},this.state,{currentUUID:r.uuid,date:n})),this.historyPush(n,t)}},{key:"playPrev",value:function(){var e=this.findCurrentPodcast();e>0&&this.playPodcast(e-1)}},{key:"playNext",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.findCurrentPodcast();t<this.state.podcasts.length-1&&"path"in this.state.podcasts[t]?this.playPodcast(t+1):e&&(this.state.waitingUpdate||(this.handleClickReload(),this.setState(Object(c.a)({},this.state,{waitingUpdate:!0}))))}},{key:"player",value:function(){return this._player.audioEl}},{key:"handlePodcastClick",value:function(e,t){t.stopPropagation(),t.preventDefault(),this.playPodcast(e)}}]),t}(n.Component),re=Object(b.translate)("Rac1ByDate")(ie),ce=(a(231),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).registration=!1,e.state={newServiceWorkerDetected:!1,language:j.hasOwnProperty(navigator.language)?navigator.language:"en-en"},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("onNewServiceWorker",this.handleNewServiceWorker.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("onNewServiceWorker",this.handleNewServiceWorker.bind(this))}},{key:"handleNewServiceWorker",value:function(e){this.registration=e.detail.registration,this.setState(Object(c.a)({},this.state,{newServiceWorkerDetected:!0}))}},{key:"render",value:function(){var e=new Date,t="/".concat(e.getFullYear(),"/").concat(1+e.getMonth(),"/").concat(e.getDate(),"/0/0"),a=this.state,n=a.newServiceWorkerDetected,i=a.language,r=j[i];return console.log({language:i,translations:r}),o.a.createElement(b.TranslatorProvider,{translations:r},o.a.createElement(p.a,null,o.a.createElement("div",{className:"App",id:"router-container"},o.a.createElement(v.a,{parent:this,prefix:"App",blacklist:["newServiceWorkerDetected"]}),o.a.createElement(U,{newServiceWorkerDetected:n,onLoadNewServiceWorkerAccept:this.handleLoadNewServiceWorkerAccept.bind(this),language:i,onLanguageChange:this.handleLanguageChange.bind(this)}),o.a.createElement("header",{className:"App-header",id:"page-wrap"},o.a.createElement(M.a,null,o.a.createElement(m.a,null,o.a.createElement(g.a,{path:"/live",render:function(e){return o.a.createElement(Y,e)}}),o.a.createElement(g.a,{path:"/directe"},o.a.createElement(y.a,{to:{pathname:"live"}})),o.a.createElement(g.a,{path:"/:year/:month/:day/:hour/:minute",render:function(e){return o.a.createElement(re,e)}}),o.a.createElement(g.a,{path:"/:year/:month/:day/:hour",render:function(e){return o.a.createElement(re,e)}}),o.a.createElement(g.a,{path:"/:year/:month/:day",render:function(e){return o.a.createElement(re,e)}}),o.a.createElement(y.a,{to:{pathname:t}})))))))}},{key:"handleLoadNewServiceWorkerAccept",value:function(){this.props.onLoadNewServiceWorkerAccept(this.registration)}},{key:"handleLanguageChange",value:function(e){this.setState(Object(c.a)({},this.state,{language:e}))}}]),t}(o.a.Component));ce.defaultProps={onLoadNewServiceWorkerAccept:function(e){}};var se=ce,le=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ue(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(o.a.createElement(se,{onLoadNewServiceWorkerAccept:function(e){var t;e.waiting&&(navigator.serviceWorker.addEventListener("controllerchange",function(e){t||(t=!0,console.log("Controller loaded"),window.location.reload())}),e.waiting.postMessage("skipWaiting"))}}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Rac1.js",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/Rac1.js","/service-worker.js");le?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ue(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ue(t,e)})}}({onUpdate:function(e){var t=new CustomEvent("onNewServiceWorker",{detail:{registration:e}});document.dispatchEvent(t)}})}},[[114,2,1]]]);
//# sourceMappingURL=main.13c67735.chunk.js.map