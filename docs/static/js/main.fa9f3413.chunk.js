(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,a){"use strict";(function(e){var n=a(2),o=a(32),r=a(11),i=a(9),c=a(15),s=a(14),l=a(16),u=a(1),d=a.n(u),h=a(0),p=a(34),m=function(t){function a(){var e;Object(r.a)(this,a);return(e=Object(c.a)(this,Object(s.a)(a).call(this))).loadGoogleTag("UA-129704402-1"),p.a.initialize("UA-129704402-1",{titleCase:!1}),e}return Object(l.a)(a,t),Object(i.a)(a,[{key:"componentDidMount",value:function(){this.sendPageView(this.context.router.history.location),this.context.router.history.listen(this.sendPageView),p.a.set({PageLanguage:this.props.language})}},{key:"componentDidUpdate",value:function(e){e.language!==this.props.language&&p.a.set({PageLanguage:this.props.language})}},{key:"sendPageView",value:function(e){p.a.set({page:e.pathname}),p.a.pageview(e.pathname)}},{key:"loadGoogleTag",value:function(t){e.dataLayer=e.dataLayer||[],e.gtag=function(){e.dataLayer.push(arguments)},e.gtag("js",new Date),e.gtag("config",t),setTimeout(function(){var e=document.createElement("script");e.src="https://www.googletagmanager.com/gtag/js?id=".concat(t),document.body.appendChild(e)},1)}},{key:"render",value:function(){return this.props.children}}]),a}(d.a.Component);m.contextTypes={router:h.PropTypes.object},m.defaultProps={language:"en-en"};var g=function(e){function t(){var e;Object(r.a)(this,t),e=Object(c.a)(this,Object(s.a)(t).call(this));var a=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;return e.dnt="1"===a||"yes"===a,e}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.trackOptIn,n=Object(o.a)(e,["children","trackOptIn"]);return this.dnt&&a?t:d.a.createElement(m,n,t)}}]),t}(d.a.Component);g.defaultProps=Object(n.a)({},m.defaultProps,{trackOptIn:!1}),t.a=g}).call(this,a(98))},117:function(e,t,a){e.exports=a(242)},122:function(e,t,a){},187:function(e,t,a){},239:function(e,t,a){},242:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(12),i=a.n(r),c=(a(122),a(2)),s=a(11),l=a(9),u=a(15),d=a(14),h=a(16),p=a(245),m=a(247),g=a(246),f=a(244),y=a(107),v=a.n(y),b=a(26),k=a(18),w={locale:"en-en",AppMenu:Object(c.a)({"By date":"By date",Live:"Live","Update!":"Update!","New version available!":"New version available!",Language:"Language","Change application language":"Change application language"},["Catal\xe0","Castellano","English"].reduce(function(e,t){return Object(c.a)({},e,Object(k.a)({},"Change language to ".concat(t),"Change language to ".concat(t)))},{}),{"Allow tracking":"Allow tracking","Allow tracking user interactions for usage analysis":"Allow tracking user interactions for usage analysis",Yes:"Yes",No:"No"}),Rac1ByDate:{"Rac1 Radio Podcasts Player":"Rac1 Radio Podcasts Player"},Rac1Directe:{Live:"Live","Rac1 live":"Rac1 Live","Rac1 Radio Podcasts Player":"Rac1 Radio Podcasts Player"},ReloadButton:{Reload:"Reload"},Button:Object(c.a)({Key:"Key",Keys:"Keys",Prev:"Prev",Next:"Next",More:"More",Less:"Less",Play:"Play",Pause:"Pause",Mute:"Mute",Unmute:"Unmute","Remove last":"Remove last","Remove last podcast from playlist":"Remove last podcast from playlist","Play previous podcast":"Play previous podcast","Play next podcast":"Play next podcast","Toggle mute status":"Toggle mute status","Toggle Play/Pause":"Toggle Play/Pause","Show more controls":"Show more controls","Show less controls":"Show less controls"},[{symbol:"10s",orig:"10 seconds"},{symbol:"60s",orig:"1 minute"},{symbol:"10m",orig:"10 minutes"}].reduce(function(e,t){var a;return Object(c.a)({},e,(a={},Object(k.a)(a,"-".concat(t.symbol),"-".concat(t.symbol)),Object(k.a)(a,"+".concat(t.symbol),"+".concat(t.symbol)),Object(k.a)(a,"Go backwards ".concat(t.orig),"Go backwards ".concat(t.orig)),Object(k.a)(a,"Go forward ".concat(t.orig),"Go forward ".concat(t.orig)),a))},{}))},O={locale:"fr",AppMenu:Object(c.a)({"By date":"Per data",Live:"En directe","Update!":"Actualitza!","New version available!":"Nova versi\xf3 disponible!",Language:"Idioma","Change application language":"Canvia l'idioma de l'aplicaci\xf3"},["Catal\xe0","Castellano","English"].reduce(function(e,t){return Object(c.a)({},e,Object(k.a)({},"Change language to ".concat(t),"Canvia l'idioma a ".concat(t)))},{}),{"Allow tracking":"Seguiment","Allow tracking user interactions for usage analysis":"Permet el seguiment de les accions de l'usuari amb fins d'an\xe0lisi d'\xfas",Yes:"Si",No:"No"}),Rac1ByDate:{"Rac1 Radio Podcasts Player":"Reproductor de podcasts de Rac1"},Rac1Directe:{Live:"En directe","Rac1 live":"Rac1 en Directe","Rac1 Radio Podcasts Player":"Reproductor de podcasts de Rac1"},ReloadButton:{Reload:"Recarrega"},Button:Object(c.a)({Key:"Tecla",Keys:"Tecles",Prev:"Ant.",Next:"Seg.",More:"M\xe9s",Less:"Menys",Play:"Play",Pause:"Pausa",Mute:"Silenciar",Unmute:"Act. so","Remove last":"Elimina \xfalt","Remove last podcast from playlist":"Elimina l'\xfaltim podcast de la llista de reproducci\xf3","Play previous podcast":"Reprodueix el podcast anterior","Play next podcast":"Reprodueix el podcast seg\xfcent","Toggle mute status":"Canvia l'estat del silenci","Toggle Play/Pause":"Canvia Reprodueix/Pausa","Show more controls":"Mostra m\xe9s controls","Show less controls":"Mostra menys controls"},[{symbol:"10s",orig:"10 seconds",trans:"10 segons"},{symbol:"60s",orig:"1 minute",trans:"1 minut"},{symbol:"10m",orig:"10 minutes",trans:"10 minuts"}].reduce(function(e,t){var a;return Object(c.a)({},e,(a={},Object(k.a)(a,"-".concat(t.symbol),"-".concat(t.symbol)),Object(k.a)(a,"+".concat(t.symbol),"+".concat(t.symbol)),Object(k.a)(a,"Go backwards ".concat(t.orig),"Retrocedir ".concat(t.trans)),Object(k.a)(a,"Go forward ".concat(t.orig),"Avan\xe7ar ".concat(t.trans)),a))},{}))},P={locale:"es-es",AppMenu:Object(c.a)({"By date":"Por fecha",Live:"En directo","Update!":"\xa1Actualiza!","New version available!":"\xa1Nueva versi\xf3n disponible!",Language:"Idioma","Change application language":"Cambiar el idioma de la aplicaci\xf3n"},["Catal\xe0","Castellano","English"].reduce(function(e,t){return Object(c.a)({},e,Object(k.a)({},"Change language to ".concat(t),"Cambiar idioma a ".concat(t)))},{}),{"Allow tracking":"Seguimiento","Allow tracking user interactions for usage analysis":"Permitir el seguimiento de las acciones del usuario con fines de an\xe1lisis de uso",Yes:"S\xed",No:"No"}),Rac1ByDate:{"Rac1 Radio Podcasts Player":"Reproductor de podcasts de Rac1"},Rac1Directe:{Live:"En directo","Rac1 live":"Rac1 en Directo","Rac1 Radio Podcasts Player":"Reproductor de podcasts de Rac1"},ReloadButton:{Reload:"Recarga"},Button:Object(c.a)({Key:"Tecla",Keys:"Teclas",Prev:"Ant.",Next:"Sig.",More:"M\xe1s",Less:"Menos",Play:"Play",Pause:"Pausa",Mute:"Silenciar",Unmute:"Act. sonido","Remove last":"Eliminar \xfalt","Remove last podcast from playlist":"Eliminar el \xfaltimo podcast de la lista de reproducci\xf3n","Play previous podcast":"Reproducir el podcast anterior","Play next podcast":"Reproducir el podcast seguinte","Toggle mute status":"Canviar el estado del silencio","Toggle Play/Pause":"Canviar Reproducir/Pausa","Show more controls":"Mostrar m\xe1s controles","Show less controls":"Mostrar menos controles"},[{symbol:"10s",orig:"10 seconds",trans:"10 segundos"},{symbol:"60s",orig:"1 minute",trans:"1 minuto"},{symbol:"10m",orig:"10 minutes",trans:"10 minutos"}].reduce(function(e,t){var a;return Object(c.a)({},e,(a={},Object(k.a)(a,"-".concat(t.symbol),"-".concat(t.symbol)),Object(k.a)(a,"+".concat(t.symbol),"+".concat(t.symbol)),Object(k.a)(a,"Go backwards ".concat(t.orig),"Retroceder ".concat(t.trans)),Object(k.a)(a,"Go forward ".concat(t.orig),"Avanzar ".concat(t.trans)),a))},{}))},C={en:w,"en-en":w,"en-us":w,"en-au":w,ca:O,"ca-es":O,es:P,"es-es":P},E=a(243),j=a(108),S=a.n(j),D=(a(170),a(8)),x=a(7),R=a(44),A=a.n(R),T=a(86),L=(a(187),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={isOpen:!1,isLanguageOpen:!1},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"renderLinks",value:function(){var e=this,t=this.props,a=t.newServiceWorkerDetected,n=t.trackOptIn,r=t.children,i=t.t,c=this.state.isLanguageOpen;return o.a.createElement("div",{style:{padding:"3em 1em 1em",background:"url(".concat("/Rac1.js","/logo-rac1.png)"),backgroundSize:50,backgroundRepeat:"no-repeat",backgroundPosition:"center .5em"}},o.a.createElement(E.a,{className:"bm-item",onClick:this.handleClick.bind(this),to:"/"},o.a.createElement(D.a,{icon:x.c,style:{marginRight:".5em"}}),o.a.createElement("span",null,i("By date"))),o.a.createElement(E.a,{className:"bm-item",onClick:this.handleClick.bind(this),to:"/live"},o.a.createElement(D.a,{icon:x.b,style:{marginRight:".5em"}}),o.a.createElement("span",null,i("Live"))),a?o.a.createElement("a",{href:"/",className:"bm-item",style:{color:"green"},title:i("New version available!"),onClick:this.handleClickUpdate.bind(this)},o.a.createElement(D.a,{icon:x.a,style:{marginRight:".5em"}}),o.a.createElement("span",null,i("Update!"))):null,o.a.createElement("a",{href:"/",className:"bm-item",title:i("Change application language"),onClick:this.handleLanguageSectionClick.bind(this)},o.a.createElement(D.a,{icon:x.j,style:{marginRight:".5em"}}),o.a.createElement("span",null,i("Language")),o.a.createElement(D.a,{icon:c?x.d:x.e,style:{marginLeft:".5em"}})),c?o.a.createElement("ul",{style:{listStyleType:"none",marginTop:0}},[{code:"ca",name:"Catal\xe0"},{code:"es",name:"Castellano"},{code:"en",name:"English"}].map(function(t){return o.a.createElement("li",{key:t.code},o.a.createElement("a",{href:"/",className:"bm-item",title:i("Change language to ".concat(t.name)),onClick:e.handleClickLanguage.bind(e,t.code)},o.a.createElement("span",null,t.name)))})):null,o.a.createElement("span",{style:{display:"flex",alignItems:"center"}},o.a.createElement(S.a,{onChange:this.props.onTrackOptIn,disabled:!1,checkedChildren:i("Yes"),unCheckedChildren:i("No"),checked:n}),o.a.createElement("a",{href:"/",className:"bm-item",title:i("Allow tracking user interactions for usage analysis"),onClick:this.handleClickOptTrackIn.bind(this)},i("Allow tracking"))),r)}},{key:"render",value:function(){var e=this,t=this.props.newServiceWorkerDetected,a=this.state.isOpen,n=t?" news":"";return o.a.createElement(A.a,{minWidth:1024},function(t){var r=t?T.scaleRotate:T.slide;return o.a.createElement("div",{className:"menu-".concat(t?"big":"small").concat(n)},o.a.createElement(r,{pageWrapId:"page-wrap",outerContainerId:"router-container",isOpen:a,onStateChange:function(t){return e.handleMenuStateChange(t.isOpen)},disableCloseOnEsc:!0},e.renderLinks()))})}},{key:"handleMenuStateChange",value:function(e){this.setState({isOpen:e})}},{key:"handleClick",value:function(e){this.handleMenuStateChange(!1)}},{key:"handleLanguageSectionClick",value:function(e){var t=this.state.isLanguageOpen;e.preventDefault(),this.setState(Object(c.a)({},this.state,{isLanguageOpen:!t}))}},{key:"handleClickLanguage",value:function(e,t){t.preventDefault(),this.handleMenuStateChange(!1),this.props.onLanguageChange(e)}},{key:"handleClickUpdate",value:function(e){e.preventDefault(),this.handleMenuStateChange(!1),this.props.onLoadNewServiceWorkerAccept()}},{key:"handleClickOptTrackIn",value:function(e){e.preventDefault(),this.props.onTrackOptIn(!this.props.trackOptIn),window.location.reload()}}]),t}(o.a.Component));L.defaultProps={onLoadNewServiceWorkerAccept:function(){},newServiceWorkerDetected:!1,onLanguageChange:function(e){},onTrackOptIn:function(e){},trackOptIn:!1};var U=Object(b.translate)("AppMenu")(L),M=a(109),N=a(61),F=a.n(N),I=a(32),B=a(34),W=a(45),_=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"keysString",value:function(){if(0===this.props.keys.length)return"";var e=this.props.t,t=Object(W.a)(new Set(this.props.keys.map(function(e){return" "===e?"Space":e}).map(function(e){return 1===e.length?e.toUpperCase():e})));return" | ".concat(e("Key".concat(t.length>1?"s":"")),": ").concat(t.join(", "))}},{key:"render",value:function(){var e=this.props,t=e.text,a=e.help,n=e.icon,r=e.action,i=(e.keys,e.style),s=e.className,l=e.t,u=Object(I.a)(e,["text","help","icon","action","keys","style","className","t"]),d=Object(c.a)({borderRadius:"1em",padding:".7em",margin:"1em"},i),h=l(a)+this.keysString();return o.a.createElement("button",Object.assign({onClick:r.bind(this,"Button pressed"),"aria-label":h,title:h,className:"rac1-controls-button"+(s?" ".concat(s):""),style:d},u),o.a.createElement("div",{style:{fontSize:"calc(1em + 2.5vmin)",fontWeight:"bold",minWidth:"1.5em"}},n instanceof Function?n():n),o.a.createElement("span",{style:{fontSize:"calc(8px + 1vmin)",color:"#333"}},l(t instanceof Function?t():t)))}}]),t}(o.a.PureComponent);_.defaultProps={action:function(){},keys:[]};var H=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.buttons,n=t.keyHandlerFocus,r=t.children;return o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},a.map(function(t,a){return o.a.createElement(K,{key:a,onMouseUp:function(e){return n(e,!0)},action:t.action.bind(e),help:t.help,text:t.text,icon:t.icon,keys:t.keys})}),r)}}]),t}(o.a.PureComponent);H.defaultProps={keyHandlerFocus:function(e,t){}};var K=Object(b.translate)("Button")(_),V=a(115),G=(a(206),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.volume,n=t.muted,r="Volume handler | Keys: Shift + Arrow Up, Shift + Arrow Down",i=n?x.o:0===a?x.p:a<.5?x.n:x.q;return o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end"}},o.a.createElement("div",{style:{width:"100%",minWidth:40,height:100,display:"flex",alignItems:"center",flexDirection:"column",paddingTop:".3em"}},o.a.createElement(V.a,{onAfterChange:function(){return e.props.keyHandlerFocus()},onChange:function(t){return e.props.onSetVolume(t/100)},value:100*a,vertical:!0,"aria-label":r,title:r})),o.a.createElement("div",null,o.a.createElement(K,{onMouseUp:function(t){return e.props.keyHandlerFocus(t,!0)},action:function(){return e.props.onSetMuted(!n)},help:"Toggle mute status",text:n?"Unmute":"Mute",icon:o.a.createElement(D.a,{icon:i}),keys:["M"]})))}}]),t}(o.a.Component));G.defaultProps={keyHandlerFocus:function(){},onSetVolume:function(e){},onSetMuted:function(e){},volume:1,muted:!1};var Y=G,z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this))).controls=[{icon:o.a.createElement(D.a,{icon:x.h,flip:"horizontal"}),text:"Prev",help:"Play previous podcast",action:function(){return a.props.onPlayPrev()},group:"basic"},{icon:o.a.createElement("span",{style:{whiteSpace:"nowrap"}},o.a.createElement(D.a,{icon:x.i,flip:"horizontal"}),o.a.createElement(D.a,{icon:x.i,flip:"horizontal"})),text:"-10m",help:"Go backwards 10 minutes",action:function(){return a.player().currentTime-=600,"Current time: ".concat(a.player().currentTime)},keys:["PageUp"],group:"advanced prev"},{icon:o.a.createElement("span",{style:{whiteSpace:"nowrap"}},o.a.createElement(D.a,{icon:x.i,flip:"horizontal",style:{position:"relative",left:".25em"}}),o.a.createElement(D.a,{icon:x.i,flip:"horizontal",style:{position:"relative",left:"-.25em"}})),text:"-60s",help:"Go backwards 1 minute",action:function(){return a.player().currentTime-=60,"Current time: ".concat(a.player().currentTime)},keys:["ArrowUp"],group:"advanced prev"},{icon:o.a.createElement(D.a,{icon:x.i,flip:"horizontal"}),text:"-10s",help:"Go backwards 10 seconds",action:function(){return a.player().currentTime-=10,"Current time: ".concat(a.player().currentTime)},keys:["ArrowLeft"],group:"advanced prev"},{icon:function(){return a.props.isPlaying?o.a.createElement(D.a,{icon:x.k}):o.a.createElement(D.a,{icon:x.l})},text:function(){return a.props.isPlaying?"Pause":"Play"},help:"Toggle Play/Pause",action:function(){return a.player().paused?a.player().play():a.player().pause(),"Current pause status: ".concat(a.player().paused)},keys:[" ","p","P"],group:"basic"},{icon:o.a.createElement(D.a,{icon:x.i}),text:"+10s",help:"Go forward 10 seconds",action:function(){return a.player().currentTime+=10,"Current time: ".concat(a.player().currentTime)},keys:["ArrowRight"],group:"advanced next"},{icon:o.a.createElement("span",{style:{whiteSpace:"nowrap"}},o.a.createElement(D.a,{icon:x.i,style:{position:"relative",left:".25em"}}),o.a.createElement(D.a,{icon:x.i,style:{position:"relative",left:"-.25em"}})),text:"+60s",help:"Go forward 1 minute",action:function(){return a.player().currentTime+=60,"Current time: ".concat(a.player().currentTime)},keys:["ArrowDown"],group:"advanced next"},{icon:o.a.createElement("span",{style:{whiteSpace:"nowrap"}},o.a.createElement(D.a,{icon:x.i}),o.a.createElement(D.a,{icon:x.i})),text:"+10m",help:"Go forward 10 minutes",action:function(){return a.player().currentTime+=600,"Current time: ".concat(a.player().currentTime)},keys:["PageDown"],group:"advanced next"},{icon:o.a.createElement(D.a,{icon:x.h}),text:"Next",help:"Play next podcast",action:function(){return a.props.onPlayNext()},keys:["Enter"],group:"basic"},{help:"Decrement volume 5%",action:function(){return a.incrementVolume(-.05),"Current volume: ".concat(a.player().volume)},keys:["/",{key:"ArrowDown",shiftKey:!0}]},{help:"Increment volume 5%",action:function(){return a.incrementVolume(.05),"Current volume: ".concat(a.player().volume)},keys:["*",{key:"ArrowUp",shiftKey:!0}]},{help:"Toggle mute status",action:function(){return a.setMuted(!a.player().muted),"Current mute status: ".concat(a.player().muted)},keys:["m","M"]}],a.keyHandlerFocus=function(){},a._keyHandlerFocus=function(e,t){var n=!0;e&&e.relatedTarget&&a.props.allowFocus(e.relatedTarget)&&(n=!1),(n||t)&&(a.timer=setTimeout(function(){return a._keyHandler.focus()},100))},a.player=function(){return a.props.getPlayer()},a.state={noKeys:!0},e.extraControls.length&&(a.controls=a.controls.concat(e.extraControls)),a.controls.forEach(function(e){e._action=e.action,e.action=function(t){return a.sendEvent(t,e.help,e._action())}}),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=!0;/Mobi|Android/i.test(navigator.userAgent)||(e=!1,this.keyHandlerFocus=this._keyHandlerFocus,this.keyHandlerFocus()),this.setState(Object(c.a)({},this.state,{noKeys:e}))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"filterButtonsGroup",value:function(e,t){var a=this.props.hideButtons,n=this.state.noKeys;return e.filter(function(e){return"icon"in e&&"text"in e}).filter(function(e){return!a.includes(e.text)}).filter(function(e){return e.group.split(" ").includes(t)}).map(function(e){if(n){e.keys;return Object(I.a)(e,["keys"])}return e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.showAdvanced,n=t.volumeAsAdvanced,r=t.volume,i=t.muted,c=this.state.noKeys,s=["basic","advanced"].reduce(function(t,a){return t[a]=e.filterButtonsGroup(e.controls,a),t},{});return o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end"}},s.basic.length?o.a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},o.a.createElement(H,{buttons:s.basic,keyHandlerFocus:this.keyHandlerFocus.bind(this)},s.advanced.length?o.a.createElement(K,{onMouseUp:function(t){return e.keyHandlerFocus(t,!0)},action:this.handleShowAdvancedChange.bind(this,!a),help:"Show ".concat(a?"less":"more"," controls"),text:a?"Less":"More",icon:o.a.createElement(D.a,{icon:a?x.g:x.f})}):null),n?null:o.a.createElement(Y,{volume:r,muted:i,onSetVolume:this.setVolume.bind(this),onSetMuted:this.setMuted.bind(this),keyHandlerFocus:this.keyHandlerFocus.bind(this)})):null,o.a.createElement("div",{style:{display:"flex"}},a&&s.advanced.length?o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},o.a.createElement(H,{buttons:this.filterButtonsGroup(s.advanced,"prev"),keyHandlerFocus:this.keyHandlerFocus.bind(this)}),o.a.createElement(H,{buttons:this.filterButtonsGroup(s.advanced,"next"),keyHandlerFocus:this.keyHandlerFocus.bind(this)})):null,a&&n?o.a.createElement(Y,{volume:r,muted:i,onSetVolume:this.setVolume.bind(this),onSetMuted:this.setMuted.bind(this),keyHandlerFocus:this.keyHandlerFocus.bind(this)}):null),c?null:o.a.createElement("input",{name:"player-key-handler",style:{width:"1px",height:"1px",border:0,margin:0,padding:0,bottom:0,right:0,position:"fixed",backgroundColor:"transparent",color:"transparent",cursor:"default"},ref:function(t){e._keyHandler=t},onKeyUp:this.handleKey.bind(this),onBlur:this.keyHandlerFocus.bind(this),"aria-label":"Key input handler"}))}},{key:"setMuted",value:function(e){this.player().muted=e,this.props.onSetMuted(e)}},{key:"setVolume",value:function(e){this.player().volume=e,this.props.onSetVolume(e)}},{key:"incrementVolume",value:function(e){var t=this.props.volume,a=t;e>0&&t<1&&(a=t<=1-e?t+e:1),e<0&&t>0&&(a=t>=-e?t+e:0),a!==t&&this.setVolume(a)}},{key:"sendEvent",value:function(e,t,a){var n={category:e,action:t};"string"===typeof a&&(console.log(a),n.label=a),console.log(n),B.a.event(n)}},{key:"handleKey",value:function(e){var t=!1;this.controls.forEach(function(a){(a.keys||[]).forEach(function(n){var o="string"===typeof n?{key:n}:n;e.key===o.key&&["shiftKey","altKey","ctrlKey","metaKey"].every(function(t){return!!e[t]===!!o[t]})&&(t=!0,a.action("Key pressed"))})}),t&&(e.stopPropagation(),e.preventDefault())}},{key:"handleShowAdvancedChange",value:function(e,t,a){a.preventDefault(),this.sendEvent(t,this.props.onShowAdvancedChange(e))}}]),t}(o.a.Component);z.defaultProps={onSetVolume:function(e){},onSetMuted:function(e){},onPlayPrev:function(e){},onPlayNext:function(e){},allowFocus:function(e){},onShowAdvancedChange:function(e){},extraControls:[],hideButtons:[],volume:1,muted:!1,isPlaying:!1,showAdvanced:!1,volumeAsAdvanced:!1};var $=z,q=function(e){function t(e,a){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this))).state={volume:1},n.history=e.history,n.state={volume:1,muted:!1,isPlaying:!1},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"player",value:function(){return this._player.audioEl}}]),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.t;this.initialTitle=document.title,document.title="".concat(e(this.initialTitle)," - ").concat(e("Live"))}},{key:"componentWillUnmount",value:function(){document.title=this.initialTitle}},{key:"render",value:function(){var e=this,t=this.state,a=t.volume,n=t.muted,r=t.isPlaying,i=(0,this.props.t)("Rac1 live");return o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,i),o.a.createElement($,{getPlayer:this.player.bind(this),volume:a,muted:n,allowFocus:function(e){return e.className.match(/rc-slider-handle/)},isPlaying:r,onSetVolume:function(t){return e.setState(Object(c.a)({},e.state,{volume:t}))},onSetMuted:function(t){return e.setState(Object(c.a)({},e.state,{muted:t}))},hideButtons:["Prev","Next","-10m","-60s","-10s","+10m","+60s","+10s"]}),o.a.createElement(F.a,{ref:function(t){e._player=t},style:{width:"100%"},src:"http://rac1.radiocat.net/;*.nsv",autoPlay:!0,title:i,controls:!0,controlsList:"nodownload",preload:"auto",volume:a,muted:n,onPlay:this.handlePlayStatusChange.bind(this,!0),onPause:this.handlePlayStatusChange.bind(this,!1),onVolumeChanged:function(t){return e.setState(Object(c.a)({},e.state,{volume:t.currentTarget.volume,muted:t.currentTarget.muted}))}}))}},{key:"handlePlayStatusChange",value:function(e){this.setState(Object(c.a)({},this.state,{isPlaying:e}))}}]),t}(n.Component),J=Object(b.translate)("Rac1Directe")(q),Q=a(51),X=a(113),Z=a.n(X),ee=Object(b.translate)("ReloadButton")(function(e){var t=e.t,a=Object(I.a)(e,["t"]),n=t("Reload");return o.a.createElement("button",Object.assign({},a,{"aria-label":n,style:{borderRadius:".5em",padding:".25em",margin:"0 0 0 1em"}}),o.a.createElement("div",{style:{fontSize:"calc(.5em + 2vmin)",fontWeight:"bold",marginBottom:"-.25em"}},o.a.createElement(D.a,{icon:x.m})),o.a.createElement("span",{style:{fontSize:"calc(5px + 1vmin)",color:"#333"}},n))}),te=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.completedDownload,a=e.date,n=e.children,r=e.minDate,i=e.maxDate;return o.a.createElement("div",{style:{color:"#333",backgroundColor:"white",padding:"2em",borderRadius:"1em",margin:"1em",textAlign:"left",position:"relative",fontSize:"large"}},o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},o.a.createElement(Z.a,{onChange:this.handleDateChange.bind(this),onBlur:this.handleDateBlur.bind(this),minDate:r,maxDate:i,required:!0,value:a,clearIcon:null,calendarIcon:o.a.createElement(D.a,{icon:x.c})}),o.a.createElement(ee,{onClick:this.props.onClickReload.bind(this),disabled:!t})),o.a.createElement("div",{style:{textAlign:"center"}},n))}},{key:"handleDateChange",value:function(e){e.setHours(0),e.setMinutes(0),this.props.onDateChange(e)}},{key:"handleDateBlur",value:function(e){var t=!0;e&&e.relatedTarget&&e.relatedTarget.className.match(/(calendar|date-?picker)/)&&(t=!1),t&&this.props.onDateBlur(e)}}]),t}(o.a.PureComponent);te.defaultProps={onClickReload:function(e){},onDateBlur:function(e){},onDateChange:function(e){},completedDownload:!0,date:new Date,maxDate:new Date};var ae=te,ne=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"renderChildren",value:function(){var e=this.props,t=e.children,a=e.current;return void 0===t||0===t.length?null:t.map(function(e,t){return o.a.createElement("li",{key:e.key,style:{position:"relative",marginLeft:"2.5em",textIndent:"-1.5em",padding:"1pt 0"}},t===a?o.a.createElement(D.a,{icon:x.l,style:{position:"absolute",left:"-2.75em",padding:"1pt 0"}}):null,e)})}},{key:"render",value:function(){var e=this,t=this.props.children,a={listStyleType:"none",marginLeft:0,paddingLeft:0,textAlign:"left"};return void 0===t||0===t.length?null:o.a.createElement(A.a,{minWidth:1024},function(n){return o.a.createElement("ul",{style:Object(c.a)({},a,{columnCount:n&&Math.floor(t.length/10)||1})},e.renderChildren())})}}]),t}(o.a.PureComponent);ne.defaultProps={};var oe=ne,re=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).handleClick=function(e){return a.props.onClick(e)},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.path,n=t.uuid,r=t.hour,i=t.minute,c=t.title;return o.a.createElement("span",null,a?o.a.createElement("a",{href:a,onClick:this.handleClick.bind(this),style:{textDecoration:"none"}},r,"h",i?((e=i)<10?"0":"")+e:"",": ",c):o.a.createElement("span",null,n))}}]),t}(o.a.PureComponent);re.defaultProps={onClick:function(e){}};var ie=re,ce=a(38),se=a.n(ce),le=a(65),ue=function(){function e(t){Object(s.a)(this,e),this._podcastsData={},this._pages_uuids=[],this._previous_uuids=[],this.controller=new AbortController,this.antiCorsBackends=[{url:function(e){return"".concat(e)},parser:function(){var e=Object(le.a)(se.a.mark(function e(t){return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),extraOptions:{"Content-Type":"application/json; charset=utf-8"}},{url:function(e){return"https://cors-anywhere.herokuapp.com/".concat(e)},parser:function(e){return e.text()},extraOptions:{credentials:"same-origin"}},{url:function(e){return"https://api.allorigins.ml/get?url=".concat(encodeURIComponent(e))},parser:function(){var e=Object(le.a)(se.a.mark(function e(t){var a;return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(200!==(a=e.sent).status.http_code){e.next=7;break}return e.abrupt("return",a.contents);case 7:throw Error(a);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{url:function(e){return"https://secret-ocean-49799.herokuapp.com/".concat(e)},parser:function(){var e=Object(le.a)(se.a.mark(function e(t){return se.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),extraOptions:{"Content-Type":"application/json; charset=utf-8"}}],this.dataAttrsFind=/ class="(audioteca-item|pagination-link)" /,this.dataAttrsClean=/.* (data-[^=]*)="([^"]*)".*/;this.onListUpdate=t.onListUpdate||function(){},this.setDate(t.date)}return Object(l.a)(e,[{key:"abort",value:function(){this.controller.abort()}},{key:"handleFetchErrors",value:function(e){if(!e.ok)throw Error(e.statusText);return e}},{key:"catchFetchErrors",value:function(e){return function(t){if("AbortError"===t.name)return console.log(t.message),Promise.reject(t);if("function"!==typeof e)throw console.error(t.message),Error(t);e(t)}}},{key:"setDate",value:function(e){this.date!==e&&(this._previous_uuids=[]),this.date=e,this.updateList()}},{key:"updateList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===e&&(this._pages_uuids=[],this.pages=[0],this.handleListUpdate()),this.getPodcastsUUIDs(e).then(this.getPodcasts.bind(this,e)).then(this.handleListUpdate.bind(this,e)).catch(this.catchFetchErrors())}},{key:"getPodcasts",value:function(e,t){var a=this;return t.map(function(t){return"..."===t.uuid||t.uuid in a._podcastsData||a.getPodcastData(t.uuid).then(a.handlePodcastUpdate.bind(a,e)).catch(a.catchFetchErrors()),t})}},{key:"handleListUpdate",value:function(){var e=this,t=Object(W.a)(this._previous_uuids.filter(function(e){return"..."!==e.uuid})),a=!0,n=function(e){return"".concat(e.getFullYear(),"/").concat(e.getMonth()+1,"/").concat(e.getDate())},o=function(t){return!("date"in t)||(a=t.date,o=e.date,n(a)===n(o));var a,o};this.pages.forEach(function(n){var r=e._pages_uuids[n];void 0===r?(t.push({uuid:"..."}),a=!1):r.filter(function(e){return 0===t.filter(function(t){return t.uuid===e.uuid}).length}).filter(o).forEach(function(e){return t.push(e)})}),t=t.map(function(t){return e._podcastsData[t.uuid]||t}).filter(o),a&&(this._previous_uuids=t);var r=a&&t.every(function(e){return"path"in e});return this.onListUpdate(t,r),t}},{key:"handlePodcastUpdate",value:function(e,t){var a=this;t.page=e,this._pages_uuids[e].forEach(function(n,o){n.uuid===t.uuid&&(a._pages_uuids[e][o]=t)}),this.handleListUpdate(t)}},{key:"getPodcastsUUIDs",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.getPage(t).then(function(a){var n=e.parsePage(a),o=n.uuidsPage,r=n.pages;return 0===t&&(e.pages=r.length>0?r.reverse():[0],e.pages.forEach(function(t){return 0!==t&&e.updateList(t)})),e._pages_uuids[t]=o.reverse().map(function(e){return{uuid:e,page:t}}),e._pages_uuids[t]})}},{key:"getPage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=function(e){return(e<10?"0":"")+e},o=n(this.date.getDate())+"/"+n(1+this.date.getMonth())+"/"+this.date.getFullYear(),r=new Date(this.date.getTime());r.setDate(r.getDate()+1);var i="";return 2019===r.getFullYear()&&0===r.getMonth()&&1===r.getDate()||(i=n(r.getDate())+"/"+n(1+r.getMonth())+"/"+r.getFullYear()),fetch(this.antiCorsBackends[a].url("https://api.audioteca.rac1.cat/a-la-carta/cerca?text=&programId=&sectionId=HOUR&"+"from=".concat(o,"&to=").concat(i,"&pageNumber=").concat(t)),Object(c.a)({},this.antiCorsBackends[a].extraOptions,{signal:this.controller.signal})).then(this.handleFetchErrors).then(this.antiCorsBackends[a].parser).catch(this.catchFetchErrors(function(n){if(console.log("Failed: ".concat(n)),"AbortError"!==n.name){if(a===e.antiCorsBackends.length-1)throw console.log("AntiCORS backend ".concat(a," failed. No more backends available.")),Error(n);return console.log("AntiCORS backend ".concat(a," failed. Trying next.")),e.getPage(t,a+1)}Promise.reject(n)}))}},{key:"parsePage",value:function(e){var t=this,a=["data-audio-id","data-audioteca-search-page"],n=e.split("\n").filter(function(e){return t.dataAttrsFind.test(e)}).map(function(e){return e.replace(t.dataAttrsClean,"$1=$2")}).map(function(e){return e.split("=")}).filter(function(e){return a.includes(e[0])});return{uuidsPage:n.filter(function(e){return"data-audio-id"===e[0]}).map(function(e){return e[1]}),pages:n.filter(function(e){return"data-audioteca-search-page"===e[0]}).map(function(e){return Number(e[1])})}}},{key:"getPodcastData",value:function(e){var t=this;return e in this._podcastsData?new Promise(function(a){return a(t._podcastsData[e])}):fetch("https://api.audioteca.rac1.cat/piece/audio?id=".concat(e),{signal:this.controller.signal}).then(this.handleFetchErrors).then(function(e){return e.json()}).then(function(a){return a.dateTime.startsWith("".concat(t.date.getFullYear()+1,"-").concat(t.date.getMonth()+1))&&(a.dateTime=a.dateTime.replace("".concat(t.date.getFullYear()+1),"".concat(t.date.getFullYear())),console.log("Podcast date in future. Fixing to: "+a.dateTime)),a.uuid=e,a.date=new Date(a.dateTime),a.hour=Number(a.audio.time.split(":")[0]),a.minute=Number(a.audio.time.split(":")[1]),a.title=a.appTabletTitle.replace(/ \d\d\/.*/,""),a.titleFull=a.appTabletTitle,a.path=a.path.replace(/\/get\//,"/file/").replace(/\/(\d)\//,"/$1/-/"),t._podcastsData[e]=a,a})}}]),e}(),de=function(e){function t(e,a){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this))).history=e.history,n.initialTitle=document.title,n.state={podcasts:[{uuid:"..."}],currentUUID:"",date:n.getDateFromParams(e),maxDate:new Date,volume:1,muted:!1,isPlaying:!1,completed:!1,waitingUpdate:!1,showAdvancedControls:!1},n.extraControls=[{help:"Reload playlist",action:n.handleClickReload.bind(Object(Q.a)(Object(Q.a)(n))),keys:["r","R"]}],n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"getDateFromParams",value:function(e){var t=e.match.params;return new Date(t.year,t.month-1,t.day,t.hour||0,t.minute||0)}}]),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.unlisten=this.history.listen(this.handleHistoryChange.bind(this)),this.rac1=new ue({date:this.state.date,onListUpdate:this.handleListUpdate.bind(this)})}},{key:"componentWillUnmount",value:function(){this.unlisten(),this.rac1.abort(),document.title=this.initialTitle}},{key:"render",value:function(){var e=this,t=this.state,a=t.podcasts,n=t.volume,r=t.muted,i=t.completed,s=t.date,l=t.maxDate,u=t.isPlaying,d=t.showAdvancedControls,h=s instanceof Date?"".concat(s.getDate(),"/").concat(1+s.getMonth(),"/").concat(s.getFullYear()):"...",p=this.findCurrentPodcast(),m=p>0,g=void 0!==a&&a.length>p&&"path"in a[p]?a[p].path:"",f=void 0!==a&&a.length>0&&"audio"in a[p]?"".concat(a[p].titleFull):h,y=o.a.createElement($,{getPlayer:this.player.bind(this),volume:n,muted:r,allowFocus:function(e){return e.className.match(/date-?picker|rc-slider-handle/)},onPlayNext:this.playNext.bind(this),onPlayPrev:this.playPrev.bind(this),onSetVolume:function(t){return e.setState(Object(c.a)({},e.state,{volume:t}))},onSetMuted:function(t){return e.setState(Object(c.a)({},e.state,{muted:t}))},showAdvanced:d,volumeAsAdvanced:!0,onShowAdvancedChange:function(t){return e.setState(Object(c.a)({},e.state,{showAdvancedControls:t})),"".concat(t?"Show":"Hide"," advanced buttons")},isPlaying:u,ref:function(t){t&&(e.keyHandlerFocus=t.keyHandlerFocus)},extraControls:this.extraControls}),v=o.a.createElement(F.a,{ref:function(t){e._player=t},style:{width:"100%"},src:g,autoPlay:m,title:f,controls:!0,controlsList:"nodownload",preload:m?"auto":"metadata",onEnded:this.playNext.bind(this),volume:n,muted:r,onPlay:this.handlePlayStatusChange.bind(this,!0),onPause:this.handlePlayStatusChange.bind(this,!1),onVolumeChanged:function(t){return e.setState(Object(c.a)({},e.state,{volume:t.currentTarget.volume,muted:t.currentTarget.muted}))}}),b=o.a.createElement(ae,{date:s,minDate:new Date(2015,5,1),maxDate:l,completedDownload:i,onClickReload:this.handleClickReload.bind(this),onDateBlur:function(){return e.keyHandlerFocus()},onDateChange:this.handleDateChange.bind(this)},o.a.createElement(oe,{current:p},a.map(function(t,a){return o.a.createElement(ie,Object.assign({key:"..."!==t.uuid?t.uuid:"..._".concat(a)},t,{onClick:e.handlePodcastClick.bind(e,a)}))})));return o.a.createElement(A.a,{minWidth:1024},function(e){return e?o.a.createElement("div",{style:{display:"flex",alignItems:"stretch"}},o.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-evenly"}},o.a.createElement("h3",null,f),y,v),b):o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",null,f),y,v,b)})}},{key:"handleHistoryChange",value:function(e,t){var a=this.getDateFromParams(this.props),n=this.state.date;"POP"===t&&(n.getFullYear()!==a.getFullYear()||n.getMonth()!==a.getMonth()||n.getDate()!==a.getDate()?this.handleDateChange(a):n.getHours()===a.getHours()&&n.getMinutes()===a.getMinutes()||(this.setState(Object(c.a)({},this.state,{currentUUID:"",dateNew:a})),this.selectPodcastByDate(a,!1)))}},{key:"historyPush",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="/".concat(e.getFullYear(),"/").concat(1+e.getMonth(),"/").concat(e.getDate(),"/").concat(e.getHours(),"/").concat(e.getMinutes());this.history.location.pathname!==a&&(t?this.history.replace(a):this.history.push(a))}},{key:"handlePlayStatusChange",value:function(e){this.setState(Object(c.a)({},this.state,{isPlaying:e}))}},{key:"handleListUpdate",value:function(e,t){var a=this.state,n=a.waitingUpdate,o=a.currentUUID,r=a.date,i=(!n||!t)&&n;this.setState(Object(c.a)({},this.state,{podcasts:e,completed:t,waitingUpdate:i,maxDate:new Date})),t&&""===o&&this.selectPodcastByDate(r),!0===n&&!1===i&&this.playNext(!1)}},{key:"handleDateChange",value:function(e){var t=this;e!==this.state.date&&(this.setState(Object(c.a)({},this.state,{currentUUID:"",date:e})),null!==e&&(this.historyPush(e),setTimeout(function(){return t.rac1.setDate(e)},50)))}},{key:"handlePodcastsLastRemove",value:function(){this.setState(Object(c.a)({},this.state,{podcasts:Object(W.a)(this.state.podcasts).slice(0,-1)}))}},{key:"handleClickReload",value:function(){if(this.state.completed)return this.setState(Object(c.a)({},this.state,{completed:!1})),this.rac1.updateList()}},{key:"selectPodcastByDate",value:function(e){var t=this.state.podcasts.filter(function(t){return t.hour>=e.getHours()&&(t.hour>e.getHours()||t.minute>=e.getMinutes())});t.length>0&&this.playPodcast(this.findPodcastByUUID(t[0].uuid))}},{key:"findPodcastByUUID",value:function(e){var t=0;return this.state.podcasts.forEach(function(a,n){a.uuid===e&&(t=n)}),t}},{key:"findCurrentPodcast",value:function(){return this.findPodcastByUUID(this.state.currentUUID)}},{key:"playPodcast",value:function(e){var t,a=this.state,n=a.date,o=a.currentUUID,r=this.props.t,i=this.state.podcasts[e];i.hour===n.getHours()&&i.minute===n.getMinutes()||(n.setHours(Number(i.hour)),n.setMinutes(Number(i.minute))),t=""===o,document.title="".concat(r(this.initialTitle),": ").concat(i.titleFull),this.setState(Object(c.a)({},this.state,{currentUUID:i.uuid,date:n})),this.historyPush(n,t)}},{key:"playPrev",value:function(){var e=this.findCurrentPodcast();if(e>0&&"path"in this.state.podcasts[e-1])return this.playPodcast(e-1),"".concat(this.state.podcasts[e-1].titleFull)}},{key:"playNext",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.findCurrentPodcast();return t<this.state.podcasts.length-1&&"path"in this.state.podcasts[t+1]?(this.playPodcast(t+1),"".concat(this.state.podcasts[t+1].titleFull)):e&&!this.state.waitingUpdate?(this.handleClickReload(),this.setState(Object(c.a)({},this.state,{waitingUpdate:!0})),"Updating podcasts list"):void 0}},{key:"player",value:function(){return this._player.audioEl}},{key:"handlePodcastClick",value:function(e,t){t.stopPropagation(),t.preventDefault(),this.playPodcast(e)}}]),t}(n.Component),he=Object(b.translate)("Rac1ByDate")(de),pe=(a(239),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).registration=!1,e.state={newServiceWorkerDetected:!1,language:C.hasOwnProperty(navigator.language)?navigator.language:"en-en",trackOptIn:!1},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("onNewServiceWorker",this.handleNewServiceWorker.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("onNewServiceWorker",this.handleNewServiceWorker.bind(this))}},{key:"handleNewServiceWorker",value:function(e){this.registration=e.detail.registration,this.setState(Object(c.a)({},this.state,{newServiceWorkerDetected:!0}))}},{key:"render",value:function(){var e=this,t=new Date,a="/".concat(t.getFullYear(),"/").concat(1+t.getMonth(),"/").concat(t.getDate(),"/0/0"),n=this.state,r=n.newServiceWorkerDetected,i=n.language,s=n.trackOptIn,l=C[i];return o.a.createElement(b.TranslatorProvider,{translations:l},o.a.createElement(p.a,null,o.a.createElement("div",{className:"App",id:"router-container"},o.a.createElement(v.a,{parent:this,prefix:"App",blacklist:["newServiceWorkerDetected"]}),o.a.createElement(U,{newServiceWorkerDetected:r,onLoadNewServiceWorkerAccept:this.handleLoadNewServiceWorkerAccept.bind(this),language:i,onLanguageChange:this.handleLanguageChange.bind(this),onTrackOptIn:function(t){return e.setState(Object(c.a)({},e.state,{trackOptIn:t}))},trackOptIn:s}),o.a.createElement("header",{className:"App-header",id:"page-wrap"},o.a.createElement(M.a,{language:i,trackOptIn:s},o.a.createElement(m.a,null,o.a.createElement(g.a,{path:"/live",render:function(e){return o.a.createElement(J,e)}}),o.a.createElement(g.a,{path:"/directe"},o.a.createElement(f.a,{to:{pathname:"live"}})),o.a.createElement(g.a,{path:"/:year/:month/:day/:hour/:minute",render:function(e){return o.a.createElement(he,e)}}),o.a.createElement(g.a,{path:"/:year/:month/:day/:hour",render:function(e){return o.a.createElement(he,e)}}),o.a.createElement(g.a,{path:"/:year/:month/:day",render:function(e){return o.a.createElement(he,e)}}),o.a.createElement(f.a,{to:{pathname:a}})))))))}},{key:"handleLoadNewServiceWorkerAccept",value:function(){this.props.onLoadNewServiceWorkerAccept(this.registration)}},{key:"handleLanguageChange",value:function(e){this.setState(Object(c.a)({},this.state,{language:e}))}}]),t}(o.a.Component));pe.defaultProps={onLoadNewServiceWorkerAccept:function(e){}};var me=pe,ge=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function fe(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(me,{onLoadNewServiceWorkerAccept:function(e){var t;e.waiting&&(navigator.serviceWorker.addEventListener("controllerchange",function(e){t||(t=!0,console.log("Controller loaded"),window.location.reload())}),e.waiting.postMessage("skipWaiting"))}}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Rac1.js",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/Rac1.js","/service-worker.js");ge?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):fe(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):fe(t,e)})}}({onUpdate:function(e){var t=new CustomEvent("onNewServiceWorker",{detail:{registration:e}});document.dispatchEvent(t)}})}},[[117,2,1]]]);
//# sourceMappingURL=main.fa9f3413.chunk.js.map