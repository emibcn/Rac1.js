{"version":3,"sources":["AppMenu.jsx","Button.jsx","Controls.jsx","Rac1Directe.jsx","Playlist.jsx","PodcastsList.jsx","Podcast.jsx","rac1.js","Rac1ByDate.jsx","App.js","serviceWorker.js","index.js","GAListener.jsx"],"names":["AppMenu","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","isOpen","_this$props","props","newServiceWorkerDetected","children","react_default","a","createElement","style","padding","background","backgroundSize","backgroundRepeat","backgroundPosition","Link","className","onClick","handleClick","bind","to","index_es","icon","faByDate","marginRight","faDirecte","href","color","title","handleClickUpdate","faUpgrade","_this2","extraClass","react_responsive_default","minWidth","matches","BurgerMenu","pageWrapId","outerContainerId","onStateChange","handleMenuStateChange","disableCloseOnEsc","renderLinks","setState","e","preventDefault","onLoadNewServiceWorkerAccept","React","Component","defaultProps","Button","text","help","action","restProps","objectWithoutProperties","assign","aria-label","borderRadius","margin","fontSize","fontWeight","Function","PureComponent","ButtonsGroup","_this$props2","buttons","keyHandlerFocus","Fragment","map","control","index","Button_Button","key","onMouseUp","force","Controls","controls","faFastForward","flip","onPlayPrev","group","faForward","player","currentTime","keys","position","left","isPlaying","faPause","faPlay","paused","play","pause","onPlayNext","incrementVolume","shiftKey","muted","_keyHandlerFocus","doFocus","relatedTarget","allowFocus","timer","setTimeout","_keyHandler","focus","getPlayer","extraControls","length","concat","test","navigator","userAgent","clearTimeout","hideButtons","filter","includes","split","showAdvanced","reduce","res","filterButtonsGroup","Button_ButtonsGroup","handleShowAdvancedChange","faEyeSlash","faEye","name","width","height","border","bottom","right","backgroundColor","cursor","ref","element","onKeyUp","handleKey","onBlur","volume","onSetVolume","increment","volumeNew","setVolume","stopPropagation","forEach","key_orig","every","mod","console","log","event","onShowAdvancedChange","Rac1Directe","history","_player","audioEl","initialTitle","document","_this$state","src_Controls","v","objectSpread","bundle_default","src","autoPlay","controlsList","preload","onPlay","handlePlayStatusChange","onPause","ReloadButton","marginBottom","faRefresh","Playlist","completedDownload","date","minDate","maxDate","textAlign","display","justifyContent","alignItems","entry_default","onChange","handleDateChange","handleDateBlur","required","value","clearIcon","calendarIcon","faCalendar","Playlist_ReloadButton","onClickReload","disabled","setHours","setMinutes","onDateChange","match","onDateBlur","Date","PodcastsList","current","undefined","child","marginLeft","textIndent","styles","listStyleType","paddingLeft","columnCount","Math","floor","renderChildren","Podcast","num","path","uuid","hour","minute","textDecoration","Rac1","_podcastsData","_pages_uuids","_previous_uuids","controller","AbortController","dataAttrsFind","dataAttrsClean","onListUpdate","setDate","abort","response","ok","Error","statusText","err","message","error","updateList","pageNumber","arguments","pages","handleListUpdate","getPodcastsUUIDs","then","getPodcasts","catch","catchFetchErrors","podcasts","podcast","getPodcastData","handlePodcastUpdate","newList","toConsumableArray","w","completed","dateToString","d","getFullYear","getMonth","getDate","filterByDates","d1","d2","page","pageUuids","push","podcastPage","allCompleted","podcastNew","_this3","_this4","getPage","dataRaw","_this4$parsePage","parsePage","uuidsPage","reverse","pad2","next","getTime","dateNext","fetch","credentials","signal","handleFetchErrors","_this5","searchData","data","line","replace","Number","_this6","Promise","resolve","json","dateTime","startsWith","audio","time","appTabletTitle","titleFull","Rac1ByDate","currentUUID","getDateFromParams","waitingUpdate","showAdvancedControls","handleClickReload","assertThisInitialized","params","year","month","day","unlisten","listen","handleHistoryChange","rac1","dateText","findCurrentPodcast","autoplay","currentPath","el","playNext","playPrev","show","onEnded","playlist","src_Playlist","src_PodcastsList","src_Podcast","handlePodcastClick","flexDirection","location","dateNew","getHours","getMinutes","selectPodcastByDate","newPath","pathname","_this$state2","waitingUpdateNext","historyPush","slice","found","playPodcast","findPodcastByUUID","_this$state3","retry","App","registration","addEventListener","handleNewServiceWorker","removeEventListener","detail","todayStr","HashRouter","id","src_AppMenu_0","handleLoadNewServiceWorkerAccept","GAListener","Switch","Route","render","src_Rac1Directe","src_Rac1ByDate","Redirect","isLocalhost","Boolean","window","hostname","registerValidSW","swUrl","config","serviceWorker","register","onupdatefound","installingWorker","installing","onstatechange","onUpdate","onSuccess","ReactDOM","src_App_0","preventDevToolsReloadLoop","waiting","reload","postMessage","getElementById","URL","process","origin","contentType","headers","get","status","indexOf","ready","unregister","checkValidServiceWorker","CustomEvent","dispatchEvent","GAListenerProd","_home_node_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_home_node_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_node_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","loadGoogleTag","ReactGA","initialize","sendPageView","context","router","set","pageview","GACode","global","dataLayer","gtag","scriptTag","body","appendChild","contextTypes","PropTypes","object","dnt","doNotTrack","msDoNotTrack","react__WEBPACK_IMPORTED_MODULE_5___default"],"mappings":"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","file":"static/js/main.8179b669.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from \"react-router-dom\";\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faBroadcastTower as faDirecte,\n  faCalendarAlt as faByDate,\n  faArrowAltCircleUp as faUpgrade,\n} from '@fortawesome/free-solid-svg-icons'\n\nimport MediaQuery from 'react-responsive';\nimport {\n  slide as SmallMenu,\n  scaleRotate as BigMenu,\n} from 'react-burger-menu'\n\nimport './AppMenu.css';\n\nclass AppMenu extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      isOpen: false,\n    };\n  }\n\n  renderLinks() {\n    const { newServiceWorkerDetected, children } = this.props;\n\n    return (\n      <div\n        style={{\n          padding: '3em 1em 1em',\n          background: 'url(logo-rac1.png)',\n          backgroundSize: 50,\n          backgroundRepeat: 'no-repeat',\n          backgroundPosition: 'center .5em',\n        }}>\n        <Link className='bm-item' onClick={ this.handleClick.bind(this) } to=\"/\">\n          <FontAwesomeIcon icon={ faByDate } style={{ marginRight: '.5em' }} />\n          <span>By date</span>\n        </Link>\n        <Link className='bm-item' onClick={ this.handleClick.bind(this) } to=\"/directe\" >\n          <FontAwesomeIcon icon={ faDirecte } style={{ marginRight: '.5em' }} />\n          <span>En directe</span>\n        </Link>\n        { newServiceWorkerDetected ? (\n            <a\n              href='/'\n              className='bm-item'\n              style={{ color: 'green' }}\n              title=\"New version available!\"\n              onClick={ this.handleClickUpdate.bind(this) }\n              >\n              <FontAwesomeIcon icon={ faUpgrade } style={{ marginRight: '.5em' }} />\n              <span>Update!</span>\n            </a>\n          ) : null\n        }\n        { children }\n      </div>\n    )\n  }\n\n  render() {\n    const { newServiceWorkerDetected } = this.props;\n    const { isOpen } = this.state;\n    const extraClass = newServiceWorkerDetected ? ' news' : '';\n\n    return (\n      <MediaQuery minWidth={700}>\n        { matches => {\n          if ( matches ) {\n            return (\n              <div className={ 'menu-big' + extraClass }>\n                <BigMenu\n                  pageWrapId='page-wrap'\n                  outerContainerId='outer-container'\n                  isOpen={ isOpen }\n                  onStateChange={ state => this.handleMenuStateChange(state.isOpen) }\n                  disableCloseOnEsc\n                >\n                  { this.renderLinks() }\n                </BigMenu>\n              </div>\n            );\n          } else {\n            return (\n              <div className={ 'menu-small' + extraClass }>\n                <SmallMenu\n                  pageWrapId='page-wrap'\n                  outerContainerId='outer-container'\n                  disableCloseOnEsc\n                >\n                  { this.renderLinks() }\n                </SmallMenu>\n              </div>\n            );\n          }\n        }}\n      </MediaQuery>\n    )\n  }\n\n  handleMenuStateChange(isOpen) {\n    this.setState({\n      isOpen,\n    });\n  }\n\n  handleClick(e) {\n    this.handleMenuStateChange(false);\n  }\n\n  handleClickUpdate(e) {\n    e.preventDefault();\n    this.handleMenuStateChange(false);\n    this.props.onLoadNewServiceWorkerAccept();\n  }\n}\n\nAppMenu.defaultProps = {\n  onLoadNewServiceWorkerAccept: () => {},\n  newServiceWorkerDetected: false,\n};\n\nAppMenu.propTypes = {\n  onLoadNewServiceWorkerAccept: PropTypes.func.isRequired,\n  newServiceWorkerDetected: PropTypes.bool.isRequired,\n};\n\nexport default AppMenu;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass Button extends React.PureComponent {\n  render() {\n    const { text, help, icon, action, ...restProps } = this.props;\n    return (\n      <button\n        onClick={ action }\n        aria-label={ help }\n        title={ help }\n        className='rac1-controls-button'\n        style={{\n          borderRadius: '1em',\n          padding: '.7em',\n          margin: '1em',\n        }}\n        { ...restProps }\n      >\n        <div style={{\n          fontSize: 'calc(1em + 2.5vmin)',\n          fontWeight: 'bold',\n          minWidth: '1.5em',\n        }} >\n          { icon instanceof Function ? icon() : icon }\n        </div>\n        <span style={{\n          fontSize: 'calc(8px + 1vmin)',\n          color: '#333'\n        }}>\n          { text instanceof Function ? text() : text }\n        </span>\n      </button>\n    )\n  }\n};\n\nButton.defaultProps = {\n};\n\nButton.propTypes = {\n  text: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.node,\n  ]).isRequired,\n  icon: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.node,\n  ]).isRequired,\n  action: PropTypes.func.isRequired,\n  help: PropTypes.string.isRequired,\n};\n\nclass ButtonsGroup extends React.PureComponent {\n  render() {\n    const { buttons, keyHandlerFocus } = this.props;\n    return (\n      <React.Fragment>\n        { buttons.map( (control, index) => {\n            return <Button\n              key={ index }\n              onMouseUp={ e => keyHandlerFocus(e, true) }\n              action={ control.action.bind(this) }\n              help={ control.help }\n              text={ control.text }\n              icon={ control.icon }\n            />\n          })\n        }\n      </React.Fragment>\n    )\n  }\n}\n\nButtonsGroup.defaultProps = {\n  keyHandlerFocus: (e, force) => {},\n};\n\nButtonsGroup.propTypes = {\n  keyHandlerFocus: PropTypes.func.isRequired,\n  buttons: PropTypes.arrayOf( PropTypes.shape( Button.propTypes ) )\n};\n\nexport { Button, ButtonsGroup };\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faPlay,\n  faPause,\n  faForward,\n  faFastForward,\n  faEye,\n  faEyeSlash,\n} from '@fortawesome/free-solid-svg-icons'\n\nimport { Button, ButtonsGroup } from './Button';\n\nclass Controls extends React.Component {\n\n  // Controls definitions:\n  // - Only button\n  // - Only key binding\n  // - Both\n  controls = [\n    {\n      icon: <FontAwesomeIcon icon={ faFastForward } flip=\"horizontal\" />,\n      text: 'Prev',\n      help: 'Play previous podcast',\n      action: () => this.props.onPlayPrev(),\n      group: 'basic',\n    },\n    {\n      icon: (\n        <span>\n          <FontAwesomeIcon icon={ faForward } flip=\"horizontal\" />\n          <FontAwesomeIcon icon={ faForward } flip=\"horizontal\" />\n        </span>\n      ),\n      text: '-10m',\n      help: 'Go backwards 10 minutes',\n      action: () => this.player().currentTime -= 600,\n      keys: [ 'PageUp' ],\n      group: 'advanced prev',\n    },\n    {\n      icon: (\n        <span>\n          <FontAwesomeIcon\n            icon={faForward}\n            flip=\"horizontal\"\n            style={{ position: 'relative', left: '.25em' }} />\n          <FontAwesomeIcon\n            icon={faForward}\n            flip=\"horizontal\"\n            style={{ position: 'relative', left: '-.25em' }} />\n        </span>\n      ),\n      text: '-60s',\n      help: 'Go backwards 1 minute',\n      action: () => this.player().currentTime -= 60,\n      keys: [ 'ArrowUp' ],\n      group: 'advanced prev',\n    },\n    {\n      icon: <FontAwesomeIcon icon={ faForward } flip=\"horizontal\" />,\n      text: '-10s',\n      help: 'Go backwards 10 seconds',\n      action: () => this.player().currentTime -= 10,\n      keys: [ 'ArrowLeft' ],\n      group: 'advanced prev',\n    },\n    {\n      icon: () => this.props.isPlaying ?\n         <FontAwesomeIcon icon={ faPause } /> :\n         <FontAwesomeIcon icon={ faPlay } /> ,\n      text: () => this.props.isPlaying ? 'Pause' : 'Play',\n      help: 'Toggle Play/Pause',\n      action: () => this.player().paused ? this.player().play() : this.player().pause(),\n      keys: [ ' ', 'p', 'P' ],\n      group: 'basic',\n    },\n    {\n      icon: <FontAwesomeIcon icon={ faForward } />,\n      text: '+10s',\n      help: 'Go forward 10 seconds',\n      action: () => this.player().currentTime += 10,\n      keys: [ 'ArrowRight' ],\n      group: 'advanced next',\n    },\n    {\n      icon: (\n        <span>\n          <FontAwesomeIcon\n            icon={faForward}\n            style={{ position: 'relative', left: '.25em' }} />\n          <FontAwesomeIcon\n            icon={faForward}\n            style={{ position: 'relative', left: '-.25em' }} />\n        </span>\n      ),\n      text: '+60s',\n      help: 'Go forward 1 minute',\n      action: () => this.player().currentTime += 60,\n      keys: [ 'ArrowDown' ],\n      group: 'advanced next',\n    },\n    {\n      icon: (\n        <span>\n          <FontAwesomeIcon icon={ faForward } />\n          <FontAwesomeIcon icon={ faForward } />\n        </span>\n      ),\n      text: '+10m',\n      help: 'Go forward 10 minutes',\n      action: () => this.player().currentTime += 600,\n      keys: [ 'PageDown' ],\n      group: 'advanced next',\n    },\n    {\n      icon: <FontAwesomeIcon icon={ faFastForward } />,\n      text: 'Next',\n      help: 'Play next podcast',\n      action: () => this.props.onPlayNext(),\n      keys: [ 'Enter' ],\n      group: 'basic',\n    },\n    {\n      help: 'Decrement volume 5%',\n      action: () => this.incrementVolume(-.05),\n      keys: [\n        '/',\n        {key: 'ArrowDown', shiftKey: true}\n      ],\n    },\n    {\n      help: 'Increment volume 5%',\n      action: () => this.incrementVolume(.05),\n      keys: [\n        '*',\n        {key: 'ArrowUp', shiftKey: true}\n      ],\n    },\n    {\n      help: 'Toggle mute status',\n      action: () => this.player().muted = !this.player().muted,\n      keys: [ 'm', 'M' ],\n    },\n  ];\n\n  constructor(props) {\n    super();\n\n    // Add extra controls\n    if ( props.extraControls.length ) {\n      this.controls = this.controls.concat( props.extraControls );\n    }\n  }\n\n  keyHandlerFocus = () => {};\n  _keyHandlerFocus = (e, force) => {\n    let doFocus = true;\n\n    // Allow datepicker to get focus\n    if ( e && e.relatedTarget &&\n          this.props.allowFocus( e.relatedTarget ) ) {\n      doFocus = false;\n    }\n\n    if ( doFocus || force ) {\n      this.timer = setTimeout(() => this._keyHandler.focus(), 100);\n    }\n  };\n\n  componentDidMount() {\n    // Disable key handler on mobile devices (enable on the rest)\n    if ( !(/Mobi|Android/i.test(navigator.userAgent)) ) {\n       this.keyHandlerFocus = this._keyHandlerFocus;\n       this.keyHandlerFocus();\n    }\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.timer);\n  }\n\n  filterButtonsGroup(controls, group) {\n    const { hideButtons } = this.props;\n\n    return controls\n      .filter( control => 'icon' in control && 'text' in control )\n      .filter( control => !hideButtons.includes(control.text) )\n      .filter( control => control.group.split(' ').includes(group) )\n  }\n\n  render() {\n    const { showAdvanced } = this.props;\n    const buttons = ['basic','advanced'].reduce( (res, group) => {\n      res[group] = this.filterButtonsGroup(this.controls, group);\n      return res;\n    }, {});\n\n    return (\n      <div>\n        { showAdvanced && buttons['advanced'].length ? (\n          <div>\n            <div>\n              <ButtonsGroup\n                buttons={ this.filterButtonsGroup(buttons['advanced'], 'prev') }\n                keyHandlerFocus={ this.keyHandlerFocus.bind(this) }\n              />\n            </div>\n            <div>\n              <ButtonsGroup\n                buttons={ this.filterButtonsGroup(buttons['advanced'], 'next') }\n                keyHandlerFocus={ this.keyHandlerFocus.bind(this) }\n              />\n            </div>\n          </div>\n        ) : null }\n        { buttons['basic'].length ? (\n          <div>\n            <ButtonsGroup\n              buttons={ buttons['basic'] }\n              keyHandlerFocus={ this.keyHandlerFocus.bind(this) }\n            />\n            { buttons['advanced'].length ? (\n              <Button\n                onMouseUp={ e => this.keyHandlerFocus(e, true) }\n                action={ this.handleShowAdvancedChange.bind(this, !showAdvanced) }\n                help={ `Show ${ showAdvanced ? 'less' : 'more' } controls` }\n                text={ showAdvanced ? 'Less' : 'More' }\n                icon={ <FontAwesomeIcon icon={ showAdvanced ? faEyeSlash : faEye } /> }\n              />\n            ) : null }\n          </div>\n        ) : null }\n        <input\n          name='player-key-handler'\n          style={{ // Almost invisible ;)\n            width: '1px',\n            height: '1px',\n            border: 0,\n            margin: 0,\n            padding: 0,\n            bottom: 0,\n            right: 0,\n            position: 'fixed',\n            backgroundColor: 'transparent',\n            color: 'transparent',\n            cursor: 'default',\n          }}\n          ref={ element => { this._keyHandler = element } }\n          onKeyUp={ this.handleKey.bind(this) }\n          onBlur={ this.keyHandlerFocus.bind(this) }\n          aria-label=\"Key input handler\"\n        />\n      </div>\n    );\n  }\n\n  player = () => this.props.getPlayer();\n\n  setVolume(volume) {\n    this.player().volume = volume;\n    this.props.onSetVolume(volume);\n  }\n\n  incrementVolume(increment) {\n    const { volume } = this.props;\n    let volumeNew = volume;\n\n    // Increment\n    if ( increment > 0 && volume < 1 ) {\n      volumeNew = volume <= (1 - increment) ? volume + increment : 1;\n    }\n\n    // Decrement\n    if ( increment < 0 && volume > 0 ) {\n      volumeNew = volume >= (-increment) ? volume + increment : 0;\n    }\n\n    // Prevent updating volume if limit reached\n    if ( volumeNew !== volume ) {\n      this.setVolume(volumeNew);\n    }\n  }\n\n  handleKey(e) {\n    let stopPropagation = false;\n\n    // Handle controls keys\n    this.controls.forEach( control => {\n      (control.keys||[]).forEach( key_orig => {\n\n        // Understand plain string or custom key object\n        let key = typeof key_orig === 'string' ? {key: key_orig} : key_orig;\n\n        // If it's exact key match\n        if(e.key === key.key &&\n          ['shiftKey', 'altKey', 'ctrlKey', 'metaKey']\n            .every( (mod) => !!e[mod] === !!key[mod] )) {\n          console.log(control.help);\n          stopPropagation = true;\n          control.action();\n        }\n      });\n    });\n\n    if ( stopPropagation ) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n\n  handleShowAdvancedChange(showAdvanced, event) {\n    event.preventDefault();\n    this.props.onShowAdvancedChange(showAdvanced);\n  }\n}\n\nControls.defaultProps = {\n  onSetVolume:   e => {},\n  onPlayPrev:    e => {},\n  onPlayNext:    e => {},\n  allowFocus:    e => {},\n  onShowAdvancedChange: e => {},\n  extraControls: [],\n  hideButtons:   [],\n  volume:        1,\n  isPlaying:     false,\n  showAdvanced:  false,\n};\n\nControls.propTypes = {\n  getPlayer: PropTypes.func.isRequired,\n  volume: PropTypes.number.isRequired,\n  allowFocus: PropTypes.func.isRequired,\n  onSetVolume: PropTypes.func.isRequired,\n  onPlayPrev: PropTypes.func.isRequired,\n  onPlayNext: PropTypes.func.isRequired,\n  isPlaying: PropTypes.bool.isRequired,\n  showAdvanced: PropTypes.bool.isRequired,\n  onShowAdvancedChange: PropTypes.func.isRequired,\n  hideButtons: PropTypes.arrayOf(\n    PropTypes.oneOf(\n      ['Prev', 'Next', '-10m', '-60s', '-10s', '+10m', '+60s', '+10s', 'Play/Pause']\n  )).isRequired,\n  extraControls: PropTypes.arrayOf( PropTypes.shape({\n    help: PropTypes.string.isRequired,\n    action: PropTypes.func.isRequired,\n    text: PropTypes.string,\n    icon: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.node,\n    ]),\n    keys: PropTypes.arrayOf( PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.shape({\n        key: PropTypes.string.isRequired,\n        shiftKey: PropTypes.bool,\n        altKey: PropTypes.bool,\n        ctrlKey: PropTypes.bool,\n        metaKey: PropTypes.bool,\n      }),\n    ])),\n  })),\n};\n\nexport default Controls;\n\n","import React, { Component } from 'react';\n\nimport ReactAudioPlayer from 'react-audio-player';\n\nimport Controls from './Controls';\n\nclass Rac1Directe extends Component {\n  // Initial state\n  state = {\n    volume: 1,\n  };\n\n  player() {\n    return this._player.audioEl;\n  }\n\n  constructor(props, history) {\n    super();\n\n    this.history = props.history;\n\n    // Initial state\n    this.state = {\n      volume: 1,\n      isPlaying: false,\n    };\n  }\n\n  componentDidMount() {\n    this.initialTitle = document.title;\n    document.title = `${this.initialTitle} - Directe`;\n  }\n\n  componentWillUnmount() {\n    // Reset initial title\n    document.title = this.initialTitle;\n  }\n\n  render() {\n    const { volume, isPlaying } = this.state;\n    const currentPath = 'http://rac1.radiocat.net/;*.nsv';\n    const autoplay = true;\n    const title = 'Rac1 en Directe';\n\n    return (\n      <React.Fragment>\n        <h3>{ title }</h3>\n        <Controls\n          getPlayer={ this.player.bind(this) }\n          volume={ volume }\n          isPlaying={ isPlaying }\n          onSetVolume={ (v) => this.setState({ ...this.state, volume: v }) }\n          hideButtons={['Prev', 'Next', '-10m', '-60s', '-10s', '+10m', '+60s', '+10s']}\n        />\n        <ReactAudioPlayer\n          ref={(element) => { this._player = element; }}\n          style={{ width: '100%' }}\n          src={ currentPath }\n          autoPlay={ autoplay }\n          title={ title }\n          controls\n          controlsList='nodownload'\n          preload={ (autoplay ? 'auto' : 'metadata') }\n          volume={ volume }\n          onPlay={ this.handlePlayStatusChange.bind(this, true) }\n          onPause={ this.handlePlayStatusChange.bind(this, false) }\n        />\n      </React.Fragment>\n    );\n  }\n\n  handlePlayStatusChange(isPlaying) {\n    this.setState({\n      ...this.state,\n      isPlaying,\n    });\n  }\n}\n\nexport default Rac1Directe;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport DatePicker from 'react-date-picker'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faSyncAlt as faRefresh,\n  faCalendarAlt as faCalendar,\n} from '@fortawesome/free-solid-svg-icons'\n\nconst ReloadButton = (props) => {\n  const text = 'Reload';\n  return (\n    <button\n      { ...props }\n      aria-label={ text }\n      style={{\n        borderRadius: '.5em',\n        padding: '.25em',\n        margin: '0 0 0 1em',\n      }}\n    >\n      <div style={{\n        fontSize: 'calc(.5em + 2vmin)',\n        fontWeight: 'bold',\n        marginBottom: '-.25em'\n      }}>\n        <FontAwesomeIcon icon={faRefresh} />\n      </div>\n      <span style={{\n        fontSize: 'calc(5px + 1vmin)',\n        color: '#333'\n      }}>\n        { text }\n      </span>\n    </button>\n  )\n};\n\nclass Playlist extends React.PureComponent {\n  render() {\n    const { completedDownload, date, children, minDate, maxDate } = this.props;\n\n    return (\n      <div style={{\n        color: '#333',\n        backgroundColor: 'white',\n        padding: '2em',\n        borderRadius: '1em',\n        margin: '1em',\n        textAlign: 'left',\n        position: 'relative',\n        fontSize: 'large'\n      }}>\n        <div style={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n        }}>\n          <DatePicker\n            onChange={ this.handleDateChange.bind(this) }\n            onBlur={ this.handleDateBlur.bind(this) }\n            minDate={ minDate }\n            maxDate={ maxDate }\n            required={ true }\n            value={ date }\n            clearIcon={ null }\n            calendarIcon={ <FontAwesomeIcon icon={faCalendar} /> }\n          />\n          <ReloadButton\n            onClick={ this.props.onClickReload.bind(this) }\n            disabled={ !completedDownload }\n          />\n        </div>\n        <div style={{\n          textAlign: 'center',\n        }}>\n          { children }\n        </div>\n      </div>\n    );\n  }\n\n  handleDateChange(date) {\n    date.setHours(0);\n    date.setMinutes(0);\n    this.props.onDateChange(date);\n  }\n\n  handleDateBlur(e) {\n    let focus = true;\n    if ( e && e.relatedTarget &&\n      e.relatedTarget.className.match(/(calendar|date-?picker)/) ) {\n      focus = false;\n    }\n\n    if ( focus ) {\n      this.props.onDateBlur(e);\n    }\n  }\n}\n\n\nPlaylist.defaultProps = {\n  onClickReload: (e) => {},\n  onDateBlur: (e) => {},\n  onDateChange: (e) => {},\n  completedDownload: true,\n  date: new Date(),\n  maxDate: new Date(),\n};\n\nPlaylist.propTypes = {\n  onClickReload: PropTypes.func.isRequired,\n  onDateBlur: PropTypes.func.isRequired,\n  onDateChange: PropTypes.func.isRequired,\n  completedDownload: PropTypes.bool.isRequired,\n  date: PropTypes.instanceOf(Date).isRequired,\n  minDate: PropTypes.instanceOf(Date).isRequired,\n  maxDate: PropTypes.instanceOf(Date).isRequired,\n};\n\nexport default Playlist;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport MediaQuery from 'react-responsive';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faPlay } from '@fortawesome/free-solid-svg-icons'\n\nclass PodcastsList extends React.PureComponent {\n\n  renderChildren() {\n    const { children, current } = this.props;\n    return children === undefined || children.length === 0 ?\n      null : children.map( (child, index) =>\n          <li\n            key={ child.key }\n            style={{\n              position: 'relative',\n              marginLeft: '2.5em',\n              textIndent: '-1.5em',\n              padding: '1pt 0',\n            }}\n          >\n            { index === current ? (\n              <FontAwesomeIcon\n                icon={ faPlay }\n                style={{\n                  position: 'absolute',\n                  left: '-2.75em',\n                  padding: '1pt 0',\n                }}/>\n            ) : null\n            }\n            { child }\n          </li>\n        )\n  }\n\n  render() {\n    const { children } = this.props;\n    const styles = {\n      listStyleType: 'none',\n      marginLeft: 0,\n      paddingLeft: 0,\n      textAlign: 'left',\n    };\n\n    return children === undefined || children.length === 0 ?\n      null : (\n        <MediaQuery minWidth={ 1024 }>\n          { matches => {\n            return (\n              <ul style={{\n                ...styles,\n                columnCount: matches ? Math.floor(children.length / 10) || 1 : 1,\n              }}>\n                { this.renderChildren() }\n              </ul>\n            )\n          }}\n        </MediaQuery>\n      )\n  }\n}\n\nPodcastsList.defaultProps = {\n};\n\nPodcastsList.propTypes = {\n  children: PropTypes.arrayOf( PropTypes.element ),\n  current: PropTypes.number.isRequired,\n};\n\n\nexport default PodcastsList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass Podcast extends React.PureComponent {\n  render() {\n    const { path, uuid, hour, minute, title} = this.props;\n    const pad2 = num => ( num < 10 ? '0' : '' ) + num;\n\n    return (\n      <span>\n        { !path ?\n            (\n              <span>{ uuid }</span>\n            ) :\n            (\n              <a\n                href={ path }\n                onClick={ this.handleClick.bind(this) }\n                style={{ textDecoration: \"none\" }}\n              >\n                { hour }h{ minute ? pad2(minute) : '' }: { title }\n              </a>\n            )\n        }\n      </span>\n    )\n  }\n\n  handleClick = (e) => this.props.onClick(e);\n}\n\nPodcast.defaultProps = {\n  onClick: (e) => {},\n};\n\nPodcast.propTypes = {\n  uuid: PropTypes.string.isRequired,\n  path: PropTypes.string,\n  title: PropTypes.string,\n  hour: PropTypes.number,\n  minute: PropTypes.number,\n  onClick: PropTypes.func.isRequired,\n};\n\n\nexport default Podcast;\n","class Rac1 {\n\n  // Cache for UUID => podcast\n  _podcastsData = {};\n\n  // Cache for pageNumber => UUIDs\n  _pages_uuids = [];\n\n  // Cache for reloads\n  _previous_uuids = [];\n\n  // Abort controller\n  controller = new AbortController();\n\n  constructor(props) {\n    const noop = () => {};\n    this.onListUpdate = props.onListUpdate || noop;\n    this.setDate(props.date);\n  }\n\n  abort() {\n    this.controller.abort();\n  }\n\n  // Raises exception on response error\n  handleFetchErrors(response) {\n    if ( !response.ok ) {\n      throw Error(response.statusText);\n    }\n    return response;\n  }\n\n  // Catches the fetch error, original or 'self-raised'\n  catchFetchErrors(err) {\n    if ( err.name === 'AbortError' ) {\n      console.log(err.message);\n    }\n    else {\n      console.error(err);\n    }\n  }\n\n  // Cached/compiled regexps for parsing HTML\n  dataAttrsFind  = / class=\"(audioteca-item|pagination-link)\" /;\n  dataAttrsClean = /.* (data-[^=]*)=\"([^\"]*)\".*/;\n\n  setDate(date) {\n    if ( this.date !== date ) {\n      this._previous_uuids = [];\n    }\n    this.date = date;\n    this.updateList();\n  }\n\n  // Download podcasts UUIDs and then, each podcast data\n  updateList(pageNumber=0) {\n    if ( pageNumber === 0 ) {\n      this._pages_uuids = [];\n      this.pages = [0];\n      this.handleListUpdate();\n    }\n\n    // Get list of UUIDs\n    return this.getPodcastsUUIDs(pageNumber)\n\n      // Download podcast data if needed\n      .then( this.getPodcasts.bind(this, pageNumber) )\n\n      // Trigger event for list updated\n      .then( this.handleListUpdate.bind(this, pageNumber) )\n\n      // Catch Exceptions\n      .catch( this.catchFetchErrors )\n  }\n\n  getPodcasts(pageNumber, podcasts) {\n    return podcasts\n      .map( podcast => {\n\n        // If it's a podcast and is not in the cache\n        if ( podcast.uuid !== '...' && !(podcast.uuid in this._podcastsData) ) {\n\n          // Download podcast data and then trigger\n          // event when updated\n          this.getPodcastData(podcast.uuid)\n            .then( this.handlePodcastUpdate.bind(this, pageNumber) )\n            .catch( this.catchFetchErrors )\n        }\n        return podcast;\n      })\n  }\n\n  // Creates a list with all known podcast or UUIDs\n  // and fires event onListUpdate with that\n  // () => null\n  handleListUpdate() {\n    let newList = [ ...this._previous_uuids.filter(w => w.uuid !== '...') ];\n    let completed = true;\n\n    // Helper functions\n    const dateToString = d => `${d.getFullYear()}/${d.getMonth()+1}/${d.getDate()}`;\n    const compareDates = (d1, d2) => dateToString(d1) === dateToString(d2);\n    const filterByDates = podcast => {\n      return !(\"date\" in podcast) || compareDates( podcast.date, this.date )\n    };\n\n    // Create a virtual list of all podcasts correctly ordered\n    this.pages.forEach( page => {\n\n      // Get UUIDs from the pages cache\n      var pageUuids = this._pages_uuids[ page ];\n\n      // Set temporal UUID for unresolved pages\n      if ( pageUuids === undefined ) {\n        newList.push({uuid: '...'});\n        completed = false;\n      }\n      else {\n\n        // Add this page's podcasts to the list\n        pageUuids\n\n          // Filter out already added podcasts\n          .filter( podcastPage => {\n            const found = newList.filter(\n              podcast => podcast.uuid === podcastPage.uuid );\n            return found.length === 0;\n          })\n\n          // Filter out podcasts from other dates\n          .filter( filterByDates )\n\n          // Add remaining podcasts to the list\n          .forEach( podcast => newList.push( podcast ) );\n      }\n    });\n\n    // Get cached data if available\n    newList = newList.map( podcast => this._podcastsData[podcast.uuid] || podcast )\n          // Filter out podcasts from other dates\n          .filter( filterByDates );\n\n    // Save complete list on finish\n    if ( completed ) {\n      this._previous_uuids = newList;\n    }\n\n    // See if all podcasts have already been downloaded\n    const allCompleted = completed && newList.every( podcast => 'path' in podcast );\n\n    // Trigger update event\n    this.onListUpdate(newList, allCompleted);\n\n    return newList;\n  }\n\n  // Saves the new podcast to the pages cache and fires onPodcastUpdate\n  // (pageNumber, podcastNew) => null\n  handlePodcastUpdate(pageNumber, podcastNew) {\n    podcastNew.page = pageNumber;\n    this._pages_uuids[pageNumber].forEach( (podcast,index) => {\n      if ( podcast.uuid === podcastNew.uuid ) {\n        this._pages_uuids[pageNumber][index] = podcastNew;\n      }\n    });\n\n    // Trigger update event\n    this.handleListUpdate(podcastNew);\n  }\n\n  // Gets all the podcasts UUIDs of a date\n  // (pageNumber) => Promise(Array(String(UUID)))\n  getPodcastsUUIDs(pageNumber=0) {\n    return this.getPage(pageNumber)\n      .then( dataRaw => {\n\n        const { uuidsPage, pages } = this.parsePage(dataRaw);\n\n        // If it's the first page, call the rest\n        if ( pageNumber === 0 ) {\n\n          // Save the list of pages, in reverse order\n          // If there are no pages (only one page), create a one element array,\n          // with page zero in it's first element\n          this.pages = pages.length > 0 ? pages.reverse() : [0];\n\n          // Resolve first the last page, so we have first the first day's UUIDs\n          // Don't call again first page\n          this.pages.forEach( page => (page !== 0) && this.updateList( page ) );\n        }\n\n        // Save in reversed order and along with the page number\n        this._pages_uuids[pageNumber] = uuidsPage\n          .reverse()\n          .map( uuid => { return {uuid, page: pageNumber} } );\n\n        return this._pages_uuids[pageNumber];\n      });\n  }\n\n  // Gets a page with HTML containning a list of podcasts from the server\n  // (pageNumber) => Promise(String)\n  getPage(pageNumber=0) {\n\n    // Format day and month to 2 digits 0 padded strings\n    const pad2 = num => ( num < 10 ? '0' : '' ) + num;\n    const date =\n      pad2( this.date.getDate() ) + '/' +\n      pad2( 1 + this.date.getMonth() ) + '/' +\n      this.date.getFullYear();\n\n    // Set next day's date and string\n    let next = new Date(this.date.getTime());\n    next.setDate(next.getDate() + 1);\n    let dateNext = '';\n\n    // Don't use next day date if it's 2018's last day\n    if ( !(next.getFullYear() === 2019 && next.getMonth() === 0 && next.getDate() === 1) ) {\n      dateNext =\n        pad2( next.getDate() ) + '/' +\n        pad2( 1 + next.getMonth() ) + '/' +\n        next.getFullYear();\n    }\n\n    return fetch(\n      \"https://cors-anywhere.herokuapp.com/\" // Anti CORS\n      + \"https://api.audioteca.rac1.cat/a-la-carta/cerca?\"\n      + \"text=&programId=&sectionId=HOUR&\"\n      + `from=${date}&to=${dateNext}&pageNumber=${pageNumber}`,\n      {\n        credentials: 'same-origin',\n        signal: this.controller.signal,\n      })\n      .then( this.handleFetchErrors )\n      .then( response => response.text() )\n  }\n\n  // Parses a page raw HTML to obtain audio UUIDs and the list of pages\n  // (dataRawHTML) => {uuidsPage: Array(String), pages: Array(Number)}\n  parsePage(dataRaw) {\n    const searchData = ['data-audio-id','data-audioteca-search-page'];\n    const data = dataRaw\n      .split('\\n')\n      .filter( line => this.dataAttrsFind.test(line) )\n      .map( v => v.replace(this.dataAttrsClean, '$1=$2') )\n      .map( line => line.split('=') )\n      .filter( v => searchData.includes(v[0]) );\n\n    return {\n      uuidsPage: data\n        .filter( v => v[0] === 'data-audio-id' )\n        .map( v => v[1] ),\n      pages: data\n        .filter( v => v[0] === 'data-audioteca-search-page' )\n        .map( v => Number(v[1]) ),\n    };\n  }\n\n  // Downloads podcast JSON\n  // (uuid) => Promise(podcastJSON)\n  getPodcastData(uuid) {\n\n    // Return cached version if we've got it\n    if ( uuid in this._podcastsData ) {\n      // Return podcast as an immediatelly resolved Promise,\n      // as it is what's expected\n      return new Promise( resolve => resolve(this._podcastsData[uuid]) );\n    }\n\n    return fetch(\n      `https://api.audioteca.rac1.cat/piece/audio?id=${uuid}`,\n      { signal: this.controller.signal }\n    )\n      .then( this.handleFetchErrors )\n      .then( data => data.json() )\n      .then( podcast => {\n\n        // Fix server bug on year's last day, in which gives dates in the future\n        if ( podcast.dateTime.startsWith(\n          `${this.date.getFullYear() + 1}-${this.date.getMonth() + 1}`\n        )) {\n          podcast.dateTime = podcast.dateTime\n            .replace(`${this.date.getFullYear() + 1}`, `${this.date.getFullYear()}`);\n          console.log(\"Podcast date in future. Fixing to: \" + podcast.dateTime);\n        }\n\n        // Add some data to the podcast\n        podcast.uuid      = uuid;\n        podcast.date      = new Date(podcast.dateTime);\n        podcast.hour      = Number(podcast.audio.time.split(':')[0]);\n        podcast.minute    = Number(podcast.audio.time.split(':')[1]);\n        podcast.title     = podcast.appTabletTitle.replace(/ \\d\\d\\/.*/, '');\n        podcast.titleFull = podcast.appTabletTitle;\n\n        // Prevent a redirect of 400ms :/\n        podcast.path = podcast.path.replace(/\\/get\\//, '/file/').replace(/\\/(\\d)\\//, '/$1/-/')\n\n        // Save to cache\n        this._podcastsData[uuid] = podcast;\n\n        return podcast;\n      })\n  }\n\n}\n\nexport default Rac1;\n","import React, { Component } from 'react';\n\nimport ReactAudioPlayer from 'react-audio-player';\nimport MediaQuery from 'react-responsive';\n\nimport Controls from './Controls';\nimport Playlist from './Playlist';\nimport PodcastsList from './PodcastsList';\nimport Podcast from './Podcast';\n\nimport Rac1 from './rac1';\n\nclass Rac1ByDate extends Component {\n\n  getDateFromParams(props) {\n    const date = props.match.params;\n    return new Date(\n        date.year,\n        date.month-1,\n        date.day,\n        date.hour||0,\n        date.minute||0,\n      )\n  }\n\n  constructor(props, history) {\n    super();\n\n    this.history = props.history;\n    this.initialTitle = document.title;\n\n    // Initial state\n    this.state = {\n      podcasts: [{uuid: '...'}],\n      currentUUID: '',\n      date: this.getDateFromParams(props),\n      maxDate: new Date(),\n      volume: 1,\n      isPlaying: false,\n      completed: false,\n      waitingUpdate: false,\n      showAdvancedControls: false,\n    };\n\n    this.extraControls = [\n      {\n        help: 'Reload playlist',\n        action: this.handleClickReload.bind(this),\n        keys: [ 'r', 'R' ],\n      },\n    ];\n\n    // Debugging on development\n    if ( process.env.NODE_ENV === 'development' ) {\n\n      // Log state changes\n      this._setState = this.setState;\n      this.setState = props => {\n        console.log({\n          a0_prev: JSON.parse(JSON.stringify(this.state)),\n          a1_next: JSON.parse(JSON.stringify(props)),\n        });\n        this._setState(props);\n      };\n\n      // Add a button to remove the last podcast in the list\n      this.extraControls.push({\n        icon: 'RL',\n        text: 'Remove last',\n        help: 'Remove last podcast from playlist',\n        action: this.handlePodcastsLastRemove.bind(this),\n        group: 'advanced basic',\n      });\n    }\n  }\n\n  componentWillMount() {\n\n    // Register history change event listener\n    this.unlisten = this.history.listen(this.handleHistoryChange.bind(this))\n\n    // Initiate backend library\n    this.rac1 = new Rac1({\n      date: this.state.date,\n      onListUpdate: this.handleListUpdate.bind(this),\n    });\n  }\n\n  componentWillUnmount() {\n    // Unregister history change event listener\n    this.unlisten();\n\n    // Abort backend fetches\n    this.rac1.abort();\n\n    // Reset initial title\n    document.title = this.initialTitle;\n  }\n\n  render() {\n    const {\n      podcasts,\n      volume,\n      completed,\n      date,\n      maxDate,\n      isPlaying,\n      showAdvancedControls,\n    } = this.state;\n    const dateText = date instanceof Date ?\n      `${date.getDate()}/${1 + date.getMonth()}/${date.getFullYear()}`\n      : '...';\n\n    // Find current podcast (selected by uuid instead of just position)\n    const current = this.findCurrentPodcast();\n    const autoplay = current > 0;\n    const currentPath =\n      podcasts !== undefined\n        && podcasts.length > current\n        && 'path' in podcasts[current]\n        ? podcasts[current].path : '';\n    const title = podcasts !== undefined && podcasts.length > 0 ?\n      ( 'audio' in podcasts[current] ?\n          `${podcasts[current].titleFull}` :\n          dateText )\n      : dateText;\n\n    const controls = <Controls\n          getPlayer={ this.player.bind(this) }\n          volume={ volume }\n          allowFocus={ (el) => el.className.match( /date-?picker/ ) }\n          onPlayNext={ this.playNext.bind(this) }\n          onPlayPrev={ this.playPrev.bind(this) }\n          onSetVolume={ (v) => this.setState({ ...this.state, volume: v }) }\n          showAdvanced={ showAdvancedControls }\n          onShowAdvancedChange={ show => this.setState({ ...this.state, showAdvancedControls: show }) }\n          isPlaying={ isPlaying }\n          ref={ (el) => { if(el) { this.keyHandlerFocus = el.keyHandlerFocus } } }\n          extraControls={ this.extraControls }\n        />;\n    const player = <ReactAudioPlayer\n          ref={(element) => { this._player = element; }}\n          style={{ width: '100%' }}\n          src={ currentPath }\n          autoPlay={ autoplay }\n          title={ title }\n          controls\n          controlsList='nodownload'\n          preload={ (autoplay ? 'auto' : 'metadata') }\n          onEnded={ this.playNext.bind(this) }\n          volume={ volume }\n          onPlay={ this.handlePlayStatusChange.bind(this, true) }\n          onPause={ this.handlePlayStatusChange.bind(this, false) }\n        />;\n    const playlist = <Playlist\n          date={ date }\n          minDate={ new Date(2015, 5, 1) /* 1st date with HOUR podcasts */ }\n          maxDate={ maxDate }\n          completedDownload={ completed }\n          onClickReload={ this.handleClickReload.bind(this) }\n          onDateBlur={ () => this.keyHandlerFocus() }\n          onDateChange={ this.handleDateChange.bind(this) }\n        >\n          <PodcastsList\n            current={ current }\n          >\n          { podcasts.map((podcast, index) =>\n            <Podcast\n              key={ podcast.uuid !== '...' ? podcast.uuid : `..._${index}` }\n              { ...podcast }\n              onClick={ this.handlePodcastClick.bind(this, index) }\n            />\n          )}\n          </PodcastsList>\n        </Playlist>;\n\n    return (\n      <MediaQuery minWidth={ 1024 }>\n        { matches => {\n          if ( matches ) {\n            return (\n              <div style={{\n                display: 'flex',\n                alignItems: 'stretch',\n              }}>\n                <div style={{\n                  display: 'flex',\n                  flexDirection: 'column',\n                  alignItems: 'stretch',\n                  justifyContent: 'space-evenly',\n                }}>\n                  <h3>{ title }</h3>\n                  { controls }\n                  { player }\n                </div>\n                { playlist }\n              </div>\n            );\n          } else {\n            return (\n              <React.Fragment>\n                <h3>{ title }</h3>\n                { controls }\n                { player }\n                { playlist }\n              </React.Fragment>\n            );\n          }\n        }}\n      </MediaQuery>\n    );\n  }\n\n  handleHistoryChange(location, action) {\n    const dateNew = this.getDateFromParams(this.props);\n    const { date } = this.state;\n\n    // Do nothing when change is made by us\n    if( action !== 'POP' ) {\n      return;\n    }\n\n    /*\n     * Determine action depending on what changed\n     */\n\n    // Date changed\n    if ( date.getFullYear() !== dateNew.getFullYear() ||\n      date.getMonth() !== dateNew.getMonth() ||\n      date.getDate() !== dateNew.getDate() ) {\n      this.handleDateChange(dateNew);\n    }\n\n    // Podcast changed\n    else if ( date.getHours() !== dateNew.getHours()  ||\n      date.getMinutes() !== dateNew.getMinutes() ) {\n      // Save new date to state\n      this.setState({\n        ...this.state,\n        currentUUID: '',\n        dateNew,\n      });\n      this.selectPodcastByDate(dateNew, false);\n    }\n  }\n\n  historyPush(date, replace=false) {\n    const newPath = `/${date.getFullYear()}/${1 + date.getMonth()}/${date.getDate()}/${date.getHours()}/${date.getMinutes()}`;\n\n    // Only PUSH or REPLACE if something have to change\n    if ( this.history.location.pathname !== newPath ) {\n      if ( !replace ) {\n        this.history.push(newPath);\n      }\n      else {\n        this.history.replace(newPath);\n      }\n    }\n  }\n\n  handlePlayStatusChange(isPlaying) {\n    this.setState({\n      ...this.state,\n      isPlaying,\n    });\n  }\n\n  handleListUpdate(newList, completed) {\n    // Stop waiting if completed\n    const { waitingUpdate, currentUUID, date } = this.state;\n    const waitingUpdateNext = waitingUpdate && completed ? false : waitingUpdate;\n\n    this.setState({\n      ...this.state,\n      podcasts: newList,\n      completed,\n      waitingUpdate: waitingUpdateNext,\n      maxDate: new Date(),\n    });\n\n    // If there is no podcast selected on update completed, select one\n    if ( completed && currentUUID === '' ) {\n      this.selectPodcastByDate(date);\n    }\n\n    // Play next podcast if stop waiting, but without retrying download\n    if ( waitingUpdate === true && waitingUpdateNext === false ) {\n      this.playNext(false);\n    }\n  }\n\n  handleDateChange(date) {\n    if ( date !== this.state.date ) {\n\n      // Save new date to state\n      this.setState({\n        ...this.state,\n        currentUUID: '',\n        date,\n      });\n\n      // If it's a valid date, trigger state change\n      if ( date !== null ) {\n        // Push new date to URL and history\n        this.historyPush(date);\n\n        // Call in background to prevent list update's state overwrite\n        setTimeout(() => this.rac1.setDate(date), 50);\n      }\n    }\n  }\n\n  // Removes last podcast from list\n  handlePodcastsLastRemove() {\n    this.setState({\n      ...this.state,\n      podcasts: [...this.state.podcasts].slice(0,-1),\n    });\n  }\n\n  // Updates podcasts list from backend\n  handleClickReload() {\n\n    // If there is not already an incomplete update\n    if ( this.state.completed ) {\n      this.setState({\n        ...this.state,\n        completed: false,\n      });\n\n      // Trigger a list update\n      return this.rac1.updateList();\n    }\n  }\n\n  // Select a podcast from list using date&time argument\n  selectPodcastByDate(date) {\n    // Find all podcasts matching >= date\n    const found = this.state.podcasts.filter( podcast => {\n      return podcast.hour >= date.getHours() &&\n        (podcast.hour > date.getHours() ||\n        podcast.minute >= date.getMinutes())\n    });\n\n    // Play first matched podcast\n    if ( found.length > 0 ) {\n      this.playPodcast(\n        this.findPodcastByUUID(found[0].uuid));\n    }\n  }\n\n  findPodcastByUUID(uuid) {\n    let found = 0;\n    this.state.podcasts.forEach( (podcast, index) => {\n      if ( podcast.uuid === uuid ) {\n        found = index\n      }\n    });\n\n    return found;\n  }\n\n  findCurrentPodcast() {\n    return this.findPodcastByUUID( this.state.currentUUID );\n  }\n\n  playPodcast(index) {\n    const { date, currentUUID } = this.state;\n    const podcast = this.state.podcasts[index];\n\n    // Force push&replace if it's not exact match with date, and update date in state\n    let replace = false;\n    if ( podcast.hour !== date.getHours() ||\n      podcast.minute !== date.getMinutes() ) {\n      date.setHours( Number(podcast.hour) );\n      date.setMinutes( Number(podcast.minute) );\n    }\n\n    replace = currentUUID === '';\n    document.title = `${this.initialTitle}: ${podcast.titleFull}`;\n    this.setState({\n      ...this.state,\n      currentUUID: podcast.uuid,\n      date,\n    });\n    this.historyPush(date, replace);\n  }\n\n  playPrev() {\n    const current = this.findCurrentPodcast();\n    if ( current > 0 ) {\n      this.playPodcast(current - 1);\n    }\n  }\n\n  playNext(retry=true) {\n    const current = this.findCurrentPodcast();\n\n    // If there is a next podcast and it has path, play it\n    if ( current < (this.state.podcasts.length - 1 ) &&\n       'path' in this.state.podcasts[current]) {\n      this.playPodcast(current + 1);\n    }\n    else {\n      // If we are called to retry, update list\n      if ( retry ) {\n        // If we are not already waiting for update,\n        // set  and trigger a list update\n        if ( !this.state.waitingUpdate ) {\n          this.handleClickReload();\n          this.setState({\n            ...this.state,\n            waitingUpdate: true,\n          });\n        }\n      }\n    }\n  }\n\n  player() {\n    return this._player.audioEl;\n  }\n\n  handlePodcastClick(index, e) {\n    e.stopPropagation();\n    e.preventDefault();\n    this.playPodcast(index);\n  }\n}\n\nexport default Rac1ByDate;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  HashRouter as Router,\n  Route,\n  Switch,\n  Redirect,\n} from \"react-router-dom\";\n\nimport AppMenu from './AppMenu';\nimport GAListener from './GAListener';\nimport Rac1Directe from './Rac1Directe';\nimport Rac1ByDate from './Rac1ByDate';\n\nimport './App.css';\n\nclass App extends React.Component {\n\n  constructor() {\n    super();\n    this.registration = false;\n    this.state = {\n      newServiceWorkerDetected: false,\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('onNewServiceWorker', this.handleNewServiceWorker.bind(this));\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('onNewServiceWorker', this.handleNewServiceWorker.bind(this));\n  }\n\n  handleNewServiceWorker(event) {\n    this.registration = event.detail.registration;\n    this.setState({\n      ...this.state,\n      newServiceWorkerDetected: true,\n    });\n  }\n\n  render() {\n    const date = new Date();\n    const todayStr = `/${date.getFullYear()}/${1 + date.getMonth()}/${date.getDate()}/0/0`;\n    const { newServiceWorkerDetected } = this.state;\n\n    return (\n      <Router>\n        <div className=\"App\" id=\"outer-container\">\n\n          {/* Menu */}\n          <AppMenu\n            newServiceWorkerDetected={ newServiceWorkerDetected }\n            onLoadNewServiceWorkerAccept={ this.handleLoadNewServiceWorkerAccept.bind(this) }\n          />\n\n          {/* App Route */}\n          <header className=\"App-header\" id=\"page-wrap\">\n            <GAListener>\n              <Switch>\n                <Route\n                  path=\"/directe\"\n                  render={ props => <Rac1Directe { ...props } /> } />\n\n                <Route\n                  path=\"/:year/:month/:day/:hour/:minute\"\n                  render={ props => <Rac1ByDate { ...props } /> } />\n\n                <Route\n                  path=\"/:year/:month/:day/:hour\"\n                  render={ props => <Rac1ByDate { ...props } /> } />\n\n                <Route\n                  path=\"/:year/:month/:day\"\n                  render={props => <Rac1ByDate { ...props } /> } />\n\n                {/* Set default date to today */}\n                <Redirect to={{ pathname: todayStr }} />\n              </Switch>\n            </GAListener>\n          </header>\n        </div>\n      </Router>\n    )\n  }\n\n  handleLoadNewServiceWorkerAccept() {\n    this.props.onLoadNewServiceWorkerAccept(this.registration);\n  }\n}\n\nApp.defaultProps = {\n  onLoadNewServiceWorkerAccept: registration => {},\n};\n\nApp.propTypes = {\n  onLoadNewServiceWorkerAccept: PropTypes.func.isRequired,\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n// Callback to call when user accepts loading new service worker\n// - Send message to SW to trigger the update\n// - Once updated, reload this window to load new assets\nconst updateSW = (registration) => {\n  if( registration.waiting ) {\n\n    // When the user asks to refresh the UI, we'll need to reload the window\n    var preventDevToolsReloadLoop;\n    navigator.serviceWorker.addEventListener('controllerchange', function(event) {\n\n      // Ensure refresh is only called once.\n      // This works around a bug in \"force update on reload\".\n      if (preventDevToolsReloadLoop) {\n        return;\n      }\n\n      preventDevToolsReloadLoop = true;\n      console.log('Controller loaded');\n      window.location.reload();\n    });\n\n    // Send a message to the new serviceWorker to activate itself\n    registration.waiting.postMessage('skipWaiting');\n  }\n};\n\nReactDOM.render(\n  <App onLoadNewServiceWorkerAccept={ updateSW } />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register({\n\n  // When new ServiceWorker is available, trigger an event on `document`,\n  // passing `registration` as extra data\n  onUpdate: registration => {\n    var event = new CustomEvent('onNewServiceWorker', { detail: { registration } });\n    document.dispatchEvent(event);\n  }\n\n});\n","import React from 'react';\nimport { PropTypes } from 'prop-types';\nimport ReactGA from 'react-ga';\n\nclass GAListenerProd extends React.Component {\n  static contextTypes = {\n    router: PropTypes.object\n  };\n\n  constructor(){\n     super();\n\n     const GACode = 'UA-129704402-1';\n     this.loadGoogleTag(GACode);\n     ReactGA.initialize(GACode);\n  }\n\n  componentDidMount() {\n    this.sendPageView(this.context.router.history.location);\n    this.context.router.history.listen(this.sendPageView);\n  }\n\n  sendPageView(location) {\n    ReactGA.set({ page: location.pathname });\n    ReactGA.pageview(location.pathname);\n  }\n\n  loadGoogleTag(GACode) {\n    // Global site tag (gtag.js) - Google Analytics\n    global.dataLayer = global.dataLayer || [];\n    global.gtag = function(){ global.dataLayer.push(arguments) }\n\n    global.gtag('js', new Date());\n    global.gtag('config', GACode);\n\n    // Load GTag script async\n    setTimeout(() => {\n      let scriptTag = document.createElement('script');\n      scriptTag.src = `https://www.googletagmanager.com/gtag/js?id=${GACode}`;\n      document.body.appendChild(scriptTag);\n    }, 1);\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n\n// Renders GA+children in production, only children for the rest\nclass GAListener extends React.Component {\n  render() {\n\n    const dnt = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;\n\n    // Disable GA in dev and for people with DoNotTrack HTTP header\n    return process.env.NODE_ENV !== 'production' || dnt === \"1\" || dnt === \"yes\" ?\n      this.props.children : (\n      <GAListenerProd>\n        { this.props.children }\n      </GAListenerProd>\n    )\n  }\n}\n\nexport default GAListener;\n"],"sourceRoot":""}