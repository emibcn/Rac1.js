(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,t,n){"use strict";(function(e){var a=n(6),i=n(4),o=n(9),r=n(8),c=n(10),l=n(0),s=n.n(l),u=n(1),d=n(27),h=function(t){function n(){var e;Object(a.a)(this,n);return(e=Object(o.a)(this,Object(r.a)(n).call(this))).loadGoogleTag("UA-129704402-1"),d.a.initialize("UA-129704402-1"),e}return Object(c.a)(n,t),Object(i.a)(n,[{key:"componentDidMount",value:function(){this.sendPageView(this.context.router.history.location),this.context.router.history.listen(this.sendPageView)}},{key:"sendPageView",value:function(e){d.a.set({page:e.pathname}),d.a.pageview(e.pathname)}},{key:"loadGoogleTag",value:function(t){e.dataLayer=e.dataLayer||[],e.gtag=function(){e.dataLayer.push(arguments)},e.gtag("js",new Date),e.gtag("config",t),setTimeout(function(){var e=document.createElement("script");e.src="https://www.googletagmanager.com/gtag/js?id=".concat(t),document.body.appendChild(e)},1)}},{key:"render",value:function(){return this.props.children}}]),n}(s.a.Component);h.contextTypes={router:u.PropTypes.object};var p=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;return"1"===e||"yes"===e?this.props.children:s.a.createElement(h,null,this.props.children)}}]),t}(s.a.Component);t.a=p}).call(this,n(34))},43:function(e,t,n){e.exports=n(84)},48:function(e,t,n){},81:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(40),r=n.n(o),c=(n(48),n(11)),l=n(6),s=n(4),u=n(9),d=n(8),h=n(10),p=n(88),m=n(86),f=n(90),g=n(89),y=n(87),v=n(2),b=n(3),k=n(41),w=n(23),E=n.n(w),D=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this))).controls=[{icon:i.a.createElement(v.a,{icon:b.e,flip:"horizontal"}),text:"Prev",help:"Play previous podcast",action:function(){return n.props.onPlayPrev()}},{icon:i.a.createElement("span",null,i.a.createElement(v.a,{icon:b.f,flip:"horizontal"}),i.a.createElement(v.a,{icon:b.f,flip:"horizontal"})),text:"-10m",help:"Go backwards 10 minutes",action:function(){return n.player().currentTime-=600},keys:["PageUp"]},{icon:i.a.createElement("span",null,i.a.createElement(v.a,{icon:b.f,flip:"horizontal",style:{position:"relative",left:".25em"}}),i.a.createElement(v.a,{icon:b.f,flip:"horizontal",style:{position:"relative",left:"-.25em"}})),text:"-60s",help:"Go backwards 1 minute",action:function(){return n.player().currentTime-=60},keys:["ArrowUp"]},{icon:i.a.createElement(v.a,{icon:b.f,flip:"horizontal"}),text:"-10s",help:"Go backwards 10 seconds",action:function(){return n.player().currentTime-=10},keys:["ArrowLeft"]},{icon:i.a.createElement(v.a,{icon:b.d,rotation:90}),text:"Play/Pause",help:"Toggle Play/Pause",action:function(){return n.player().paused?n.player().play():n.player().pause()},keys:[" ","p","P"]},{icon:i.a.createElement(v.a,{icon:b.f}),text:"+10s",help:"Go forward 10 seconds",action:function(){return n.player().currentTime+=10},keys:["ArrowRight"]},{icon:i.a.createElement("span",null,i.a.createElement(v.a,{icon:b.f,style:{position:"relative",left:".25em"}}),i.a.createElement(v.a,{icon:b.f,style:{position:"relative",left:"-.25em"}})),text:"+60s",help:"Go forward 1 minute",action:function(){return n.player().currentTime+=60},keys:["ArrowDown"]},{icon:i.a.createElement("span",null,i.a.createElement(v.a,{icon:b.f}),i.a.createElement(v.a,{icon:b.f})),text:"+10m",help:"Go forward 10 minutes",action:function(){return n.player().currentTime+=600},keys:["PageDown"]},{icon:i.a.createElement(v.a,{icon:b.e}),text:"Next",help:"Play next podcast",action:function(){return n.props.onPlayNext()},keys:["Enter"]},{help:"Decrement volume 5%",action:function(){return n.incrementVolume(-.05)},keys:["/",{key:"ArrowDown",shiftKey:!0}]},{help:"Increment volume 5%",action:function(){return n.incrementVolume(.05)},keys:["*",{key:"ArrowUp",shiftKey:!0}]},{help:"Toggle mute status",action:function(){return n.player().muted=!n.player().muted},keys:["m","M"]}],n.keyHandlerFocus=function(){},n._keyHandlerFocus=function(e,t){var a=!0;e&&e.relatedTarget&&n.props.allowFocus(e.relatedTarget)&&(a=!1),(a||t)&&(n.timer=setTimeout(function(){return n._keyHandler.focus()},100))},n.player=function(){return n.props.getPlayer()},e.extraControls.length&&(n.controls=n.controls.concat(e.extraControls)),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){/Mobi|Android/i.test(navigator.userAgent)||(this.keyHandlerFocus=this._keyHandlerFocus,this.keyHandlerFocus())}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,this.controls.filter(function(e){return"icon"in e&&"text"in e}).filter(function(t){return!e.props.hideButtons.includes(t.text)}).map(function(t,n){return i.a.createElement("button",{key:n,onClick:t.action.bind(e),onMouseUp:function(t){return e.keyHandlerFocus(t,!0)},"aria-label":t.help,title:t.help,className:"rac1-controls-button",style:{borderRadius:"1em",padding:"1em",margin:"1em"}},i.a.createElement("div",{style:{fontSize:"calc(1em + 2.5vmin)",fontWeight:"bold",minWidth:"1.5em"}},t.icon instanceof Function?t.icon():t.icon),i.a.createElement("span",{style:{fontSize:"calc(8px + 1vmin)",color:"#333"}},t.text instanceof Function?t.text():t.text))}),i.a.createElement("input",{name:"player-key-handler",style:{width:"1px",height:"1px",border:0,margin:0,padding:0,bottom:0,right:0,position:"fixed",backgroundColor:"transparent",color:"transparent",cursor:"default"},ref:function(t){e._keyHandler=t},onKeyUp:this.handleKey.bind(this),onBlur:this.keyHandlerFocus.bind(this),"aria-label":"Key input handler"}))}},{key:"setVolume",value:function(e){this.player().volume=e,this.props.onSetVolume(e)}},{key:"incrementVolume",value:function(e){var t=this.props.volume,n=t;e>0&&t<1&&(n=t<=1-e?t+e:1),e<0&&t>0&&(n=t>=-e?t+e:0),n!==t&&this.setVolume(n)}},{key:"handleKey",value:function(e){var t=!1;this.controls.forEach(function(n){(n.keys||[]).forEach(function(a){var i="string"===typeof a?{key:a}:a;e.key===i.key&&["shiftKey","altKey","ctrlKey","metaKey"].every(function(t){return!!e[t]===!!i[t]})&&(console.log(n.help),t=!0,n.action())})}),t&&(e.stopPropagation(),e.preventDefault())}}]),t}(i.a.PureComponent);D.defaultProps={onSetVolume:function(e){},onPlayPrev:function(e){},onPlayNext:function(e){},allowFocus:function(e){},extraControls:[],hideButtons:[],volume:1};var P=D,j=function(e){function t(e,n){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this))).state={volume:1},a.history=e.history,a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"player",value:function(){return this._player.audioEl}}]),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.initialTitle=document.title,document.title="".concat(this.initialTitle," - Directe")}},{key:"componentWillUnmount",value:function(){document.title=this.initialTitle}},{key:"render",value:function(){var e=this,t=this.state.volume;return i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",null,"Rac1 en Directe"),i.a.createElement(P,{getPlayer:this.player.bind(this),volume:t,onSetVolume:function(t){return e.setState(Object(c.a)({},e.state,{volume:t}))},hideButtons:["Prev","Next","-10m","-60s","-10s","+10m","+60s","+10s"]}),i.a.createElement(E.a,{ref:function(t){e._player=t},style:{width:"100%"},src:"http://rac1.radiocat.net/;*.nsv",autoPlay:!0,controls:!0,controlsList:"nodownload",preload:"auto",volume:t}))}}]),t}(a.Component),O=n(26),C=n(19),x=n(42),U=n.n(x),T=function(e){return i.a.createElement("button",Object.assign({},e,{"aria-label":"Reload",style:{borderRadius:".5em",padding:".25em",margin:"0 0 0 1em"}}),i.a.createElement("div",{style:{fontSize:"calc(.5em + 2vmin)",fontWeight:"bold",marginBottom:"-.25em"}},i.a.createElement(v.a,{icon:b.h})),i.a.createElement("span",{style:{fontSize:"calc(5px + 1vmin)",color:"#333"}},"Reload"))},S=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.completedDownload,n=e.date,a=e.children,o=e.minDate,r=e.maxDate;return i.a.createElement("div",{style:{color:"#333",backgroundColor:"white",padding:"2em",borderRadius:"1em",margin:"1em",textAlign:"left",position:"relative",fontSize:"large"}},i.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center"}},i.a.createElement(U.a,{onChange:this.handleDateChange.bind(this),onBlur:this.handleDateBlur.bind(this),minDate:o,maxDate:r,required:!0,value:n,clearIcon:null,calendarIcon:i.a.createElement(v.a,{icon:b.c})}),i.a.createElement(T,{onClick:this.props.onClickReload.bind(this),disabled:!t})),i.a.createElement("div",{style:{textAlign:"center"}},a))}},{key:"handleDateChange",value:function(e){e.setHours(0),e.setMinutes(0),this.props.onDateChange(e)}},{key:"handleDateBlur",value:function(e){var t=!0;e&&e.relatedTarget&&e.relatedTarget.className.match(/(calendar|date-?picker)/)&&(t=!1),t&&this.props.onDateBlur(e)}}]),t}(i.a.PureComponent);S.defaultProps={onClickReload:function(e){},onDateBlur:function(e){},onDateChange:function(e){},completedDownload:!0,date:new Date,maxDate:new Date};var _=S,N=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.current;return void 0===t||0===t.length?null:i.a.createElement("ul",{style:{listStyleType:"none",marginLeft:0,paddingLeft:0,textAlign:"left"}},t.map(function(e,t){return i.a.createElement("li",{key:e.key,style:{position:"relative",marginLeft:"2.5em",textIndent:"-1.5em",padding:"1pt 0"}},t===n?i.a.createElement(v.a,{icon:b.g,style:{position:"absolute",left:"-2.75em",padding:"1pt 0"}}):null,e)}))}}]),t}(i.a.PureComponent);N.defaultProps={};var F=N,L=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).handleClick=function(e){return n.props.onClick(e)},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.path,a=t.uuid,o=t.hour,r=t.minute,c=t.title;return i.a.createElement("span",null,n?i.a.createElement("a",{href:n,onClick:this.handleClick.bind(this),style:{textDecoration:"none"}},o,"h",r?((e=r)<10?"0":"")+e:"",": ",c):i.a.createElement("span",null,a))}}]),t}(i.a.PureComponent);L.defaultProps={onClick:function(e){}};var R=L;function W(e){if(!e.ok)throw Error(e.statusText);return e}function A(e){"AbortError"===e.name?console.log(e.message):console.error(e)}var M=/ class="(audioteca-item|pagination-link)" /,B=/.* (data-[^=]*)="([^"]*)".*/,H=function(){function e(t){Object(l.a)(this,e),this._podcastsData={},this._pages_uuids=[],this._previous_uuids=[],this.controller=new AbortController;this.date=t.date,this.onListUpdate=t.onListUpdate||function(){},this.updateList()}return Object(s.a)(e,[{key:"abort",value:function(){this.controller.abort()}},{key:"setDate",value:function(e){this.date!==e&&(this._previous_uuids=[]),this.date=e,this.updateList()}},{key:"updateList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===e&&(this._pages_uuids=[],this.pages=[0],this.handleListUpdate()),this.getPodcastsUUIDs(e).then(this.getPodcasts.bind(this,e)).then(this.handleListUpdate.bind(this,e)).catch(A)}},{key:"getPodcasts",value:function(e,t){var n=this;return t.map(function(t){return"..."===t.uuid||t.uuid in n._podcastsData||n.getPodcastData(t.uuid).then(n.handlePodcastUpdate.bind(n,e)).catch(A),t})}},{key:"handleListUpdate",value:function(){var e=this,t=Object(O.a)(this._previous_uuids.filter(function(e){return"..."!==e.uuid})),n=!0;this.pages.forEach(function(a){var i=e._pages_uuids[a];if(void 0===i)t.push({uuid:"..."}),n=!1;else{var o=function(e){return"".concat(e.getFullYear(),"/").concat(e.getMonth(),"/").concat(e.getDate())};i.filter(function(e){return 0===t.filter(function(t){return t.uuid===e.uuid}).length}).filter(function(t){return!("date"in t)||(n=t.date,a=e.date,o(n)===o(a));var n,a}).forEach(function(e){return t.push(e)})}}),t=t.map(function(t){return e._podcastsData[t.uuid]||t}),n&&(this._previous_uuids=t);var a=n&&t.every(function(e){return"path"in e});return this.onListUpdate(t,a),t}},{key:"handlePodcastUpdate",value:function(e,t){var n=this;t.page=e,this._pages_uuids[e].forEach(function(a,i){a.uuid===t.uuid&&(n._pages_uuids[e][i]=t)}),this.handleListUpdate(t)}},{key:"getPodcastsUUIDs",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.getPage(t).then(function(n){var a=e.parsePage(n),i=a.uuidsPage,o=a.pages;return 0===t&&(e.pages=o.length>0?o.reverse():[0],e.pages.forEach(function(t){return 0!==t&&e.updateList(t)})),e._pages_uuids[t]=i.reverse().map(function(e){return{uuid:e,page:t}}),e._pages_uuids[t]})}},{key:"getPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=function(e){return(e<10?"0":"")+e},n=t(this.date.getDate())+"/"+t(1+this.date.getMonth())+"/"+this.date.getFullYear(),a=new Date(this.date.getTime());a.setDate(a.getDate()+1);var i="";return a.getMonth()+1===1&&1===a.getDate()||(i=t(a.getDate())+"/"+t(1+a.getMonth())+"/"+a.getFullYear()),fetch("https://cors-anywhere.herokuapp.com/https://api.audioteca.rac1.cat/a-la-carta/cerca?"+"text=&programId=&sectionId=HOUR&from=".concat(n,"&to=").concat(i,"&pageNumber=").concat(e),{credentials:"same-origin",signal:this.controller.signal}).then(W).then(function(e){return e.text()})}},{key:"parsePage",value:function(e){var t=["data-audio-id","data-audioteca-search-page"],n=e.split("\n").filter(function(e){return M.test(e)}).map(function(e){return e.replace(B,"$1=$2")}).map(function(e){return e.split("=")}).filter(function(e){return t.includes(e[0])});return{uuidsPage:n.filter(function(e){return"data-audio-id"===e[0]}).map(function(e){return e[1]}),pages:n.filter(function(e){return"data-audioteca-search-page"===e[0]}).map(function(e){return Number(e[1])})}}},{key:"getPodcastData",value:function(e){var t=this;return e in this._podcastsData?new Promise(function(n){return n(t._podcastsData[e])}):fetch("https://api.audioteca.rac1.cat/piece/audio?id=".concat(e),{signal:this.controller.signal}).then(W).then(function(e){return e.json()}).then(function(n){var a=new Date;return n.dateTime.startsWith("".concat(a.getFullYear()+1))&&(n.dateTime=n.dateTime.replace("".concat(a.getFullYear()+1),"".concat(a.getFullYear())),console.log("Podcast date in future. Fixing to: "+n.dateTime)),n.uuid=e,n.date=new Date(n.dateTime),n.hour=Number(n.audio.time.split(":")[0]),n.minute=Number(n.audio.time.split(":")[1]),n.title=n.appTabletTitle.replace(/ \d\d\/.*/,""),n.titleFull=n.appTabletTitle,n.path=n.path.replace(/\/get\//,"/file/").replace(/\/(\d)\//,"/$1/-/"),t._podcastsData[e]=n,n})}}]),e}(),I=function(e){function t(e,n){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this))).history=e.history,a.initialTitle=document.title,a.state={podcasts:[{uuid:"..."}],currentUUID:"",date:a.getDateFromParams(e),maxDate:new Date,volume:1,completed:!1,waitingUpdate:!1},a.extraControls=[{help:"Reload playlist",action:a.handleClickReload.bind(Object(C.a)(Object(C.a)(a))),keys:["r","R"]}],a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"getDateFromParams",value:function(e){var t=e.match.params;return new Date(t.year,t.month-1,t.day,t.hour||0,t.minute||0)}}]),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.unlisten=this.history.listen(this.handleHistoryChange.bind(this)),this.rac1=new H({date:this.state.date,onListUpdate:this.handleListUpdate.bind(this)})}},{key:"componentWillUnmount",value:function(){this.unlisten(),this.rac1.abort(),document.title=this.initialTitle}},{key:"render",value:function(){var e=this,t=this.state,n=t.podcasts,a=t.volume,o=t.completed,r=t.date,l=t.maxDate,s=r instanceof Date?"".concat(r.getDate(),"/").concat(1+r.getMonth(),"/").concat(r.getFullYear()):"...",u=this.findCurrentPodcast(),d=u>0,h=void 0!==n&&n.length>u&&"path"in n[u]?n[u].path:"",p=void 0!==n&&n.length>0&&"audio"in n[u]?"".concat(n[u].titleFull):s;return i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",null,p),i.a.createElement(P,{getPlayer:this.player.bind(this),volume:a,allowFocus:function(e){return e.className.match(/date-?picker/)},onPlayNext:this.playNext.bind(this),onPlayPrev:this.playPrev.bind(this),onSetVolume:function(t){return e.setState(Object(c.a)({},e.state,{volume:t}))},ref:function(t){t&&(e.keyHandlerFocus=t.keyHandlerFocus)},extraControls:this.extraControls}),i.a.createElement(E.a,{ref:function(t){e._player=t},style:{width:"100%"},src:h,autoPlay:d,controls:!0,controlsList:"nodownload",preload:d?"auto":"metadata",onEnded:this.playNext.bind(this),volume:a}),i.a.createElement(_,{date:r,minDate:new Date(2015,5,1),maxDate:l,completedDownload:o,onClickReload:this.handleClickReload.bind(this),onDateBlur:function(){return e.keyHandlerFocus()},onDateChange:this.handleDateChange.bind(this)},i.a.createElement(F,{current:u},n.map(function(t,n){return i.a.createElement(R,Object.assign({key:"..."!==t.uuid?t.uuid:"..._".concat(n)},t,{onClick:e.handlePodcastClick.bind(e,n)}))}))))}},{key:"handleHistoryChange",value:function(e,t){var n=this.getDateFromParams(this.props),a=this.state.date;"POP"===t&&(a.getFullYear()!==n.getFullYear()||a.getMonth()!==n.getMonth()||a.getDate()!==n.getDate()?this.handleDateChange(n):a.getHours()===n.getHours()&&a.getMinutes()===n.getMinutes()||(this.setState(Object(c.a)({},this.state,{currentUUID:"",dateNew:n})),this.selectPodcastByDate(n,!1)))}},{key:"historyPush",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="/".concat(e.getFullYear(),"/").concat(1+e.getMonth(),"/").concat(e.getDate(),"/").concat(e.getHours(),"/").concat(e.getMinutes());this.history.location.pathname!==n&&(t?this.history.replace(n):this.history.push(n))}},{key:"handleListUpdate",value:function(e,t){var n=this.state,a=n.waitingUpdate,i=n.currentUUID,o=n.date,r=(!a||!t)&&a;this.setState(Object(c.a)({},this.state,{podcasts:e,completed:t,waitingUpdate:r,maxDate:new Date})),t&&""===i&&this.selectPodcastByDate(o),!0===a&&!1===r&&this.playNext(!1)}},{key:"handleDateChange",value:function(e){var t=this;e!==this.state.date&&(this.setState(Object(c.a)({},this.state,{currentUUID:"",date:e})),null!==e&&(this.historyPush(e),setTimeout(function(){return t.rac1.setDate(e)},50)))}},{key:"handlePodcastsLastRemove",value:function(){this.setState(Object(c.a)({},this.state,{podcasts:Object(O.a)(this.state.podcasts).slice(0,-1)}))}},{key:"handleClickReload",value:function(){if(this.state.completed)return this.setState(Object(c.a)({},this.state,{completed:!1})),this.rac1.updateList()}},{key:"selectPodcastByDate",value:function(e){var t=this.state.podcasts.filter(function(t){return t.hour>=e.getHours()&&(t.hour>e.getHours()||t.minute>=e.getMinutes())});t.length>0&&this.playPodcast(this.findPodcastByUUID(t[0].uuid))}},{key:"findPodcastByUUID",value:function(e){var t=0;return this.state.podcasts.forEach(function(n,a){n.uuid===e&&(t=a)}),t}},{key:"findCurrentPodcast",value:function(){return this.findPodcastByUUID(this.state.currentUUID)}},{key:"playPodcast",value:function(e){var t,n=this.state,a=n.date,i=n.currentUUID,o=this.state.podcasts[e];o.hour===a.getHours()&&o.minute===a.getMinutes()||(a.setHours(Number(o.hour)),a.setMinutes(Number(o.minute))),t=""===i,document.title="".concat(this.initialTitle,": ").concat(o.titleFull),this.setState(Object(c.a)({},this.state,{currentUUID:o.uuid,date:a})),this.historyPush(a,t)}},{key:"playPrev",value:function(){var e=this.findCurrentPodcast();e>0&&this.playPodcast(e-1)}},{key:"playNext",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.findCurrentPodcast();t<this.state.podcasts.length-1&&"path"in this.state.podcasts[t]?this.playPodcast(t+1):e&&(this.state.waitingUpdate||(this.handleClickReload(),this.setState(Object(c.a)({},this.state,{waitingUpdate:!0}))))}},{key:"player",value:function(){return this._player.audioEl}},{key:"handlePodcastClick",value:function(e,t){t.stopPropagation(),t.preventDefault(),this.playPodcast(e)}}]),t}(a.Component),z=(n(81),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).registration=!1,e.state={newServiceWorkerDetected:!1},e}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("onNewServiceWorker",this.handleNewServiceWorker.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("onNewServiceWorker",this.handleNewServiceWorker.bind(this))}},{key:"handleNewServiceWorker",value:function(e){"persist"in e&&e.persist(),console.log({event:e}),this.registration=e.registration,this.setState(Object(c.a)({},this.state,{newServiceWorkerDetected:!0}))}},{key:"render",value:function(){var e=this,t=new Date,n="/".concat(t.getFullYear(),"/").concat(1+t.getMonth(),"/").concat(t.getDate(),"/0/0"),a=this.state.newServiceWorkerDetected,o={padding:"1em",backgroundColor:"#ddd",border:"1px solid #777",display:"block"};return i.a.createElement(p.a,null,i.a.createElement("div",{className:"App"},i.a.createElement("ul",{style:{display:"flex",alignItems:"center",justifyContent:"center",listStyleType:"none",backgroundColor:"#282c34",paddingInlineStart:0,margin:0}},i.a.createElement("li",null,i.a.createElement(m.a,{to:"/",style:Object(c.a)({},o,{borderBottomLeftRadius:".5em"})},i.a.createElement(v.a,{icon:b.c,style:{marginRight:".5em"}}),"By date")),i.a.createElement("li",null,i.a.createElement(m.a,{to:"/directe",style:Object(c.a)({},o,{borderBottomRightRadius:a?null:".5em"})},i.a.createElement(v.a,{icon:b.b,style:{marginRight:".5em"}}),"En directe")),a?i.a.createElement("li",null,i.a.createElement("a",{href:"/",title:"New version available!",onClick:function(t){t.preventDefault(),console.log({registration:e.registration}),e.props.onLoadNewServiceWorkerAccept(e.registration)},style:Object(c.a)({},o,{color:"green",borderBottomRightRadius:".5em"})},i.a.createElement(v.a,{icon:b.a,style:{marginRight:".5em"}}),"Update!")):null),i.a.createElement("header",{className:"App-header"},i.a.createElement(k.a,null,i.a.createElement(f.a,null,i.a.createElement(g.a,{path:"/directe",render:function(e){return i.a.createElement(j,e)}}),i.a.createElement(g.a,{path:"/:year/:month/:day/:hour/:minute",render:function(e){return i.a.createElement(I,e)}}),i.a.createElement(g.a,{path:"/:year/:month/:day/:hour",render:function(e){return i.a.createElement(I,e)}}),i.a.createElement(g.a,{path:"/:year/:month/:day",render:function(e){return i.a.createElement(I,e)}}),i.a.createElement(y.a,{to:{pathname:n}}))))))}}]),t}(i.a.Component));z.defaultProps={onLoadNewServiceWorkerAccept:function(e){}};var V=z,Y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(i.a.createElement(V,{onLoadNewServiceWorkerAccept:function(e){var t;console.log("Registration from index.js::updateSW :",e),e.waiting&&(navigator.serviceWorker.addEventListener("controllerchange",function(e){t||(t=!0,console.log("Controller loaded"),window.location.reload())}),e.waiting.postMessage("skipWaiting"))}}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Rac1.js",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/Rac1.js","/service-worker.js");Y?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):K(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):K(t,e)})}}({onUpdate:function(e){var t=new CustomEvent("onNewServiceWorker",{registration:e});console.log("Generated event: ",t),document.dispatchEvent(t)}})}},[[43,2,1]]]);
//# sourceMappingURL=main.7c06e156.chunk.js.map